(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{579:function(e,t,a){"use strict";var n=a(9),i=a(13),l=a(26),r=a(27),o=a(29),c=a(28),s=a(30),p=a(124),u=a(0),d=a.n(u),m=a(34),h=a(90),g=a(39),b=a.n(g),v=(a(187),a(122),a(7)),f=a(866),C=a.n(f),E=a(869),k=a.n(E),x=a(872),B=a.n(x),y=a(871),I=a.n(y);function S(){var e=Object(n.a)(['\n    margin: 15px 5px;\n  \n    /* > div {\n        height: 20px !important;\n        width: 20px !important;\n        margin: "theme.spacing.unit * 2";\n        color: ',";\n\n    } */\n"]);return S=function(){return e},e}var O=v.c.div(S(),function(e){return e.theme.primaryBackGroundColour}),w=function(e){return d.a.createElement(O,null,d.a.createElement(C.a,{onChange:function(){return e.onClick(e.name)}},d.a.createElement(k.a,{expandIcon:d.a.createElement(I.a,null)},d.a.createElement("div",null,e.title)),d.a.createElement(B.a,null,e.children?e.children:d.a.createElement("div",null))))},j=a(881),T=a.n(j),P=a(883),M=a.n(P),U=a(877),L=a.n(U),R=a(879),D=a.n(R),A=a(190),H=a.n(A),W=a(407),z=a.n(W),N=a(874),_=a.n(N);function F(){var e=Object(n.a)(["\n  > div div {\n    background-color: ",";\n    font-weight: ",";\n  }\n"]);return F=function(){return e},e}var V=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).state={open:!1},a.handleClick=function(){a.setState({open:!0})},a.handleClose=function(e,t){"clickaway"!==t&&a.setState({open:!1})},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.setState({open:!0})}},{key:"render",value:function(){var e="rgb(49, 49, 49)";return this.props.error&&(e="rgb(220, 52, 54)"),this.props.success&&(e="rgb(70,154,16)"),d.a.createElement(G,{toastColour:e},d.a.createElement(H.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:this.state.open,autoHideDuration:6e3,onClose:this.handleClose,ContentProps:{"aria-describedby":"message-id"},message:d.a.createElement("span",{id:"message-id"},this.props.message),action:[d.a.createElement(z.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleClose},d.a.createElement(_.a,null))]}))}}]),t}(u.Component),G=v.c.div(F(),function(e){return e.toastColour},function(e){return e.error?"bold":"initial"}),Y=V,K=a(183),J=a.n(K),q=a(403),Z=a(40),Q=a(116),X=a(452),$=a(400),ee=a(876),te=a.n(ee),ae=a(875),ne=a.n(ae),ie=a(570),le=a.n(ie);function re(){var e=Object(n.a)(["\n  border: 2px solid rgba(0, 0, 0, 0.2);\n  border-top: 0;\n  border-bottom-left-radius: 8px;\n  border-bottom-right-radius: 8px;\n  margin-bottom: 35px;\n\n  > div small {\n    cursor: pointer;\n  }\n\n  .minimized_children {\n    padding: ",";\n  }\n"]);return re=function(){return e},e}function oe(){var e=Object(n.a)(["\n  height: ",";\n"]);return oe=function(){return e},e}var ce=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).state={isOpen:!1},a.handleMinimizer=function(){a.setState({isOpen:!a.state.isOpen})},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.state.isOpen;return d.a.createElement(pe,{padding:this.props.padding},d.a.createElement(Q.a,{margin:"0"},d.a.createElement(z.a,{"aria-label":"Add",color:"primary",onClick:this.handleMinimizer},e?d.a.createElement(ne.a,null):d.a.createElement(te.a,null)),e?d.a.createElement("small",{onClick:this.handleMinimizer},"Click to minimise options"):d.a.createElement("small",{onClick:this.handleMinimizer},"Click to expand further options")),d.a.createElement(le.a,{in:e},e?d.a.createElement("div",{className:"minimized_children"},this.props.children):d.a.createElement(se,{emptyHeight:this.props.emptyHeight})))}}]),t}(u.Component),se=v.c.div(oe(),function(e){return e.emptyHeight||"500px"}),pe=v.c.div(re(),function(e){return e.padding||"auto"}),ue=ce,de=a(571),me=a.n(de),he=a(496);function ge(){var e=Object(n.a)(["\n  padding: 5px;\n"]);return ge=function(){return e},e}function be(){var e=Object(n.a)(["\n  display: block;\n  zoom: 30%;\n  padding-top: 56px;\n  box-shadow: 2px 2px 2px;\n\n  @media (max-width: 500px) {\n    display: none;\n  }\n"]);return be=function(){return e},e}function ve(){var e=Object(n.a)(["\n  padding: 3vh;\n  display: grid;\n  grid-template-columns: 65% 35%;\n  grid-gap: 8px;\n"]);return ve=function(){return e},e}var fe=v.c.div(ve()),Ce=v.c.div(be()),Ee=v.c.div(ge()),ke=function(e){if(console.log("tabItems props",e),e.itemProps.dropdownPages)return d.a.createElement(Be,{navigationItems:e.itemProps.dropdownPages,parentId:e.pageId,parent:e.children,onChange:e.onChange,handlePageDelete:e.handlePageDelete,openMediaModal:e.openMediaModal,updatePageSubmit:e.updatePageSubmit,isUpdating:e.isUpdating,cancelUpdate:e.cancelUpdate,stateBackup:e.stateBackup,availableRoutes:e.availableRoutes,template:e.template,plugins:e.plugins});var t=function(t){t.preventDefault(),e.onChange(t.target,e.pageId,e.parentId)},a=function(t){return function(a){console.log(t,a.target.checked);var n={name:a.target.name,value:a.target.checked};e.onChange(n,e.pageId,e.parentId)}},n=function(t){t.preventDefault(),e.openMediaModal(t.target,e.pageId,e.parentId)},i=function(t){e.onChange(t.target,e.pageId,e.parentId)},l=function(t){var a={name:t,value:""};e.onChange(a,e.pageId,e.parentId)},r=e.itemProps.content,o=r.topBanner,c=r.topBannerHalfwidth,s=r.topBannerImgSize,p=r.topBannerHWbackImg,u=r.topBannerHWBackColour,m=r.topBannerTxtRightSide,h=r.topBannerTxtLightTheme,g=r.topBannerLogo,b=r.topBannerfade,v=r.topBannerTitle,f=r.topBannerSubtitle,C=r.topBannerDescription,E=r.topBannerBtnText,k=r.topBannerLink,x=r.midBanner,B=r.midBannerHalfwidth,y=r.midBannerImgSize,I=r.midBannerHWbackImg,S=r.midBannerHWBackColour,O=r.midBannerTxtRightSide,w=r.midBannerTxtLightTheme,j=r.midBannerLogo,T=r.midBannerfade,P=r.midBannerTitle,M=r.midBannerSubtitle,U=r.midBannerDescription,L=r.midBannerBtnText,R=r.midBannerLink,D=(r.bottomBanner,r.mainText);return d.a.createElement(J.a,{elevation:20},d.a.createElement(fe,null,d.a.createElement("div",null,e.children,d.a.createElement(q.a,{inputtype:"inputSelector",label:"".concat(c?"Top Banner Image (Inside Banner)":"Top Banner Image"),name:"topBanner",value:o,onChange:t,onClick:n,clearInput:l}),o&&d.a.createElement(ue,null,d.a.createElement(X.a,null,d.a.createElement(Q.a,null,d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Use the Top Banner image inside the Banner ",name:"topBannerHalfwidth",checked:c,handleChange:a})),c&&d.a.createElement(d.a.Fragment,null,d.a.createElement(q.a,{inputtype:"inputSelector",label:"Banner Background Image",name:"topBannerHWbackImg",value:p,onChange:t,onClick:n,clearInput:l}),d.a.createElement(Q.a,null,d.a.createElement(q.a,{inputtype:"input",type:"number",label:"Banner Image Size",name:"topBannerImgSize",value:s,onChange:t}),d.a.createElement(q.a,{inputtype:"inputColourPicker",label:"Banner Background Colour",name:"topBannerHWBackColour",value:u,changeColour:i,pageId:"home"}))),d.a.createElement(Q.a,null,d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Banner Text Right Side",name:"topBannerTxtRightSide",checked:m,handleChange:a}),d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Banner Light Text Color",name:"topBannerTxtLightTheme",checked:h,handleChange:a})),d.a.createElement(Q.a,null,d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Use Logo in banner",name:"topBannerLogo",checked:g,handleChange:a}),d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Banner content fade in effect",name:"topBannerfade",checked:b,handleChange:a})),d.a.createElement(q.a,{inputtype:"input",label:"Banner Title",name:"topBannerTitle",value:v,onChange:t}),d.a.createElement(q.a,{inputtype:"input",label:"Banner Subtitle",name:"topBannerSubtitle",value:f,onChange:t}),d.a.createElement(q.a,{inputtype:"input",label:"Banner Description",name:"topBannerDescription",value:C,onChange:t}),d.a.createElement(Q.a,null,d.a.createElement(q.a,{inputtype:"input",label:"Banner Button Text",name:"topBannerBtnText",value:E,onChange:t}),d.a.createElement(q.a,{inputtype:"select",label:"Banner Link",name:"topBannerLink",value:k,items:e.availableRoutes,onSelectChange:t})))),d.a.createElement(q.a,{inputtype:"inputSelector",label:"".concat(B?"Middle Banner Image (Inside Banner)":"Middle Banner Image"),name:"midBanner",value:x,onChange:t,onClick:n,clearInput:l}),x&&d.a.createElement(ue,null,d.a.createElement(X.a,null,d.a.createElement(Q.a,null,d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Use the Middle Banner image inside the Banner",name:"midBannerHalfwidth",checked:B,handleChange:a})),B&&d.a.createElement(d.a.Fragment,null,d.a.createElement(q.a,{inputtype:"inputSelector",label:"Banner Background Image",name:"midBannerHWbackImg",value:I,onChange:t,onClick:n,clearInput:l}),d.a.createElement(Q.a,null,d.a.createElement(q.a,{inputtype:"input",type:"number",label:"Banner Image Size",name:"midBannerImgSize",value:y,onChange:t}),d.a.createElement(q.a,{inputtype:"inputColourPicker",label:"Banner Background Colour",name:"midBannerHWBackColour",value:S,changeColour:i,pageId:"home"}))),d.a.createElement(Q.a,null,d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Banner Text Right Side",name:"midBannerTxtRightSide",checked:O,handleChange:a}),d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Banner Light Text Color",name:"midBannerTxtLightTheme",checked:w,handleChange:a})),d.a.createElement(Q.a,null,d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Use Logo in banner",name:"midBannerLogo",checked:j,handleChange:a}),d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Banner content fade in effect",name:"midBannerfade",checked:T,handleChange:a})),d.a.createElement(q.a,{inputtype:"input",label:"Banner Title",name:"midBannerTitle",value:P,onChange:t}),d.a.createElement(q.a,{inputtype:"input",label:"Banner Subtitle",name:"midBannerSubtitle",value:M,onChange:t}),d.a.createElement(q.a,{inputtype:"input",label:"Banner Description",name:"midBannerDescription",value:U,onChange:t}),d.a.createElement(Q.a,null,d.a.createElement(q.a,{inputtype:"input",label:"Banner Button Text",name:"midBannerBtnText",value:L,onChange:t}),d.a.createElement(q.a,{inputtype:"select",label:"Banner Link",name:"midBannerLink",value:R,items:e.availableRoutes,onSelectChange:t})))),d.a.createElement(q.a,{inputtype:"textarea",label:"Main Body Text",name:"mainText",value:D,onChange:t})),d.a.createElement(Ce,null,d.a.createElement(he.a,Object.assign({pageInfo:e.itemProps},e,{template:e.template,plugins:e.plugins,overlayBlocker:!0})))),d.a.createElement(Q.a,{justifyContent:"space-between"},d.a.createElement("div",null,d.a.createElement(Q.a,{justifyContent:"flex-start"},d.a.createElement(Z.a,{margin:"2px 5px 15px 20px",onClick:function(t){t.preventDefault(),e.updatePageSubmit(e.itemProps.content,e.pageId,e.parentId)}},"Update"),e.isUpdating&&d.a.createElement($.a,null),e.stateBackup&&d.a.createElement(Z.a,{margin:"2px 20px 15px 20px",onClick:e.cancelUpdate},"Undo Changes"))),d.a.createElement(Ee,null,d.a.createElement(z.a,{onClick:function(){e.handlePageDelete(e.pageId,e.parentId)}},d.a.createElement(me.a,{fontSize:"large"})))))};function xe(){var e=Object(n.a)(["\n  > header {\n    background-color: ",";\n    z-index: 20;\n  }\n"]);return xe=function(){return e},e}var Be=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).state={value:0,disableTabText:"",topBannerOptions:!0,midBannerOptions:!0,bottomBannerOptions:!0},a.handleChange=function(e,t){a.props.stateBackup||a.setState({value:t})},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.stateBackup!==e.stateBackup&&(this.props.stateBackup?this.setState({disableTabText:"You have made updates to this page, please save or undo your changes before selecting a new page"}):this.setState({disableTabText:""}))}},{key:"render",value:function(){var e=this,t=this.state.value,a=this.props,n=a.navigationItems,i=a.parent,l=a.parentId;console.log("tabMenu props",this.props);var r=null,o=null;return null!==n&&(r=Object.keys(n).map(function(e,t){var a=n[e];return d.a.createElement(L.a,{key:t,label:i?i.props.children+" - "+a.title:a.title})}),o=Object.keys(n).map(function(a,i){return t===i&&d.a.createElement(ke,{key:i,pageId:a,parentId:l||null,itemProps:n[a],onChange:e.props.onChange,handlePageDelete:e.props.handlePageDelete,openMediaModal:e.props.openMediaModal,updatePageSubmit:e.props.updatePageSubmit,isUpdating:e.props.isUpdating,cancelUpdate:e.props.cancelUpdate,stateBackup:e.props.stateBackup,availableRoutes:e.props.availableRoutes,template:e.props.template,plugins:e.props.plugins},d.a.createElement("h2",null,n[a].title))})),null===o&&null===r?d.a.createElement("div",null):d.a.createElement(ye,null,d.a.createElement(D.a,{title:this.state.disableTabText},d.a.createElement(T.a,{position:"static"},d.a.createElement(M.a,{value:t,onChange:this.handleChange,variant:"scrollable",scrollButtons:"auto"},r))),o,this.props.isError&&d.a.createElement(Y,{message:this.props.isError,error:!0}))}}]),t}(u.Component),ye=v.c.div(xe(),function(e){return e.theme.primaryBackGroundColour}),Ie=a(893),Se=a.n(Ie),Oe=a(902),we=a.n(Oe),je=a(904),Te=a.n(je),Pe=a(900),Me=a.n(Pe),Ue=function(e){var t=!e.fullWidth||e.fullWidth,a=e.maxWidth?e.maxWidth:"lg";return d.a.createElement("div",null,d.a.createElement(Se.a,{open:e.open,onClose:e.handleClose,"aria-labelledby":"form-dialog-title",fullWidth:t,maxWidth:a},d.a.createElement(Me.a,{id:"form-dialog-title"},e.title),d.a.createElement(we.a,null,d.a.createElement(Te.a,null,e.description),d.a.createElement("br",null),d.a.createElement("br",null),e.children)))},Le=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",checked:!1,selectVal:null},a.handleCheckbox=function(e){return function(t){a.setState(Object(i.a)({},e,t.target.checked))}},a.onSelectChange=function(e){a.setState({selectVal:e.target.value})},a.onInputChange=function(e){var t=e.target,n=t.value,l=t.name,r=n.replace(/[^\w\s]/gi,"");a.setState(Object(i.a)({},l,r))},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){if(null!==this.props.navigationItems){var e="";for(var t in this.props.navigationItems){e=this.props.navigationItems[t].title;break}this.setState({selectVal:e})}}},{key:"render",value:function(){var e=this;return console.log("newpageForm props",this.props),d.a.createElement("div",null,d.a.createElement("form",null,d.a.createElement(q.a,{inputtype:"input",label:"Page Title",name:"title",value:this.state.title,onChange:this.onInputChange}),null!==this.props.navigationItems&&d.a.createElement("div",null,d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Is this a dropdown SubPage",checked:this.state.checked,handleChange:this.handleCheckbox}),d.a.createElement("br",null),this.state.checked&&d.a.createElement(q.a,{inputtype:"select",value:this.state.selectVal,label:"Choose the parent page for this Subpage",items:this.props.navigationItems,onSelectChange:this.onSelectChange}))),d.a.createElement(Q.a,{justifyContent:"flex-end",margin:"5px"},d.a.createElement(Z.a,{onClick:this.props.handleClose},"Cancel"),d.a.createElement(Z.a,{onClick:function(){return e.props.handleSubmit(e.state)},disabled:""===this.state.title},"Confirm"),this.props.loading&&d.a.createElement($.a,null)))}}]),t}(u.Component),Re=a(114),De=a(938),Ae=(a(192),a(23)),He=a.n(Ae),We=a(915),ze=a.n(We),Ne=a(907),_e=a.n(Ne),Fe=a(909),Ve=a.n(Fe),Ge=a(913),Ye=a.n(Ge),Ke=a(911),Je=a.n(Ke);function qe(){var e=Object(n.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  /* justify-content: space-around; */\n  overflow: hidden;\n  margin: 20px 0;\n  padding: 10px;\n\n  .gridlist {\n    width: 100%;\n    height: 450px;\n  }\n\n  .media {\n    padding: 3px;\n    cursor: pointer;\n    -webkit-transition: border 0.2s ease-in-out, box-shadow 0.2s ease-in-out;\n    -moz-transition: border 0.2s ease-in-out, box-shadow 0.2s ease-in-out;\n    -ms-transition: border 0.2s ease-in-out, box-shadow 0.2s ease-in-out;\n    -o-transition: border 0.2s ease-in-out, box-shadow 0.2s ease-in-out;\n    transition: border 0.2s ease-in-out, box-shadow 0.2s ease-in-out;\n  }\n\n  .media.active {\n    border: 1px solid #09c;\n    border-radius: 5px;\n    box-shadow: 1px 1px 7px rgba(0, 200, 204, 0.7);\n    outline: none;\n  }\n\n  .gridIcon {\n    color: rgba(255, 255, 255, 0.54);\n  }\n"]);return qe=function(){return e},e}var Ze=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).state={columns:5,spacing:20,activeIndex:null,selectedValue:"",selectedName:""},a.handleResize=function(){var e=window.innerWidth,t=(e>768?5:e<=480&&1)||3,n=e>768?20:8;a.setState({columns:t,spacing:n})},a.handleSelect=function(e,t,n){a.props.selectedImage(t,n)},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),this.handleResize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=this,t=this.props.tileData;return t&&t.length?d.a.createElement(Qe,null,d.a.createElement(_e.a,{cellHeight:180,className:"gridList",cols:this.state.columns,spacing:this.state.spacing},d.a.createElement(Ve.a,{key:"Subheader",cols:this.state.columns,style:{height:"auto"}},d.a.createElement(Je.a,{component:"div"},"This is where your current websites images located.")),t.map(function(t,a){var n=e.props.selectedIndex===a?"media active":"media";return d.a.createElement(Ve.a,{key:t.title,className:n,onClick:function(n){return e.handleSelect(n,a,t)}},d.a.createElement("img",{src:t.img,alt:t.title}),d.a.createElement(Ye.a,{title:t.title,actionIcon:!e.props.isModal&&d.a.createElement(z.a,{className:"gridIcon",onClick:function(){return e.props.deleteImage(t.img,t.title)}},d.a.createElement(me.a,null))}))}))):d.a.createElement("div",null)}}]),t}(u.Component),Qe=v.c.div(qe()),Xe=Ze;function $e(){var e=Object(n.a)(["\n  margin-top: -40px;\n"]);return $e=function(){return e},e}function et(){var e=Object(n.a)(["\n  border-style: dotted;\n  padding: 5px 20px;\n  margin: 20px 5px;\n  cursor: pointer;\n\n  /* desktop */\n  @media (min-width: 500px) {\n    min-width: 455px;\n  }\n"]);return et=function(){return e},e}var tt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={uploadOpen:!1,error:null,customURL:!1,customURLtext:"",activeIndex:null,selectedValue:"",selectedName:"",deleteImgOpen:!1},a.getImageUrls=function(){var e=Object(p.a)(Object(p.a)(a)),t=[],n=Object.keys(a.props.currentImages).length,i=0,l=b.a.storage().ref();Object.keys(a.props.currentImages).map(function(r,o){var c=a.props.currentImages[r];return l.child("".concat("infinitydjs","/").concat(c)).getDownloadURL().then(function(a){t=[].concat(Object(Re.a)(t),[{title:c,img:a,key:r}]),n===++i&&e.props.setMediaImages(t)}).catch(function(e){console.log(e)})})},a.onDrop=function(e,t){if(console.log("accepted",e),console.log("rejected",t),0===t.length){if(b.a.auth().currentUser){console.log("user is signed in");var n=e[0];if(a.checkFileAlreadyExists(n))return void a.setState({error:"".concat(n.name," already exists, please remove the old image first")});b.a.storage().ref().child("".concat("infinitydjs","/").concat(n.name)).put(n).then(function(e){console.log("Uploaded a blob or file!"),console.log(e),a.addImageRefToDb(n)}).catch(function(e){console.log(e)})}else console.log(" No user is signed in."),a.props.isTimedOut()}else a.setState({error:"Rejected upload, incompatable file detected"})},a.checkFileAlreadyExists=function(e){if(null!==a.props.currentImages)return!!Object.keys(a.props.currentImages).filter(function(t,n){return a.props.currentImages[t]===e.name}).length},a.addImageRefToDb=function(e){var t=b.a.database().ref().child("".concat("infinitydjs","/site/images")).push().key,n=Object(i.a)({},t,e.name),l=Object(p.a)(Object(p.a)(a));return b.a.database().ref().child("".concat("infinitydjs","/site/images")).update(n,function(e){e?console.log("image ref in db write failed...",e):(console.log("image ref in db saved successfully"),l.props.refreshState())})},a.selectedImage=function(e,t){a.setState({customURLtext:"",activeIndex:e,selectedValue:t.img,selectedName:t.title})},a.handleCustomURL=function(e){a.setState({customURLtext:e.target.value,activeIndex:null,selectedValue:"",selectedName:""})},a.confirmImage=function(){var e=a.state,t=e.customURLtext,n=e.selectedValue,i=a.props.tabItemReference,l=t||n;a.props.onChangePageState({name:i[0].name,value:l},i[1],i[2]),a.props.handleClose()},a.deleteImage=function(e,t){console.log(e,t),a.setState({deleteImgOpen:!0})},a.confirmDelete=function(){console.log(a.state,a.props);var e=Object(p.a)(Object(p.a)(a)),t=a.props.imageURLs.find(function(e){return e.title===a.state.selectedName}),n=b.a.storage().ref();console.log("pre delete"),b.a.database().ref().child("".concat("infinitydjs","/site/images/").concat(t.key)).remove().then(function(){console.log("db delete succeeded!"),n.child("".concat("infinitydjs","/").concat(t.title)).delete().then(function(){console.log("storage img deleted"),e.setState({deleteImgOpen:!1}),e.props.refreshState()}).catch(function(e){console.log("storage error",e)})}).catch(function(e){console.log(e)})},a.handleUploadOpen=function(){a.setState({uploadOpen:!a.state.uploadOpen})},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){console.log("mounted"),this.getImageUrls()}},{key:"componentDidUpdate",value:function(e){null!==this.props.currentImages&&(this.props.currentImages===e.currentImages&&this.props.isAuthenticated===e.isAuthenticated||this.getImageUrls())}},{key:"render",value:function(){var e=this;console.log("media props",this.props);var t=this.state,a=t.error,n=t.uploadOpen,i=t.customURL,l=t.activeIndex,r=t.customURLtext,o=t.selectedName,c=t.selectedValue,s=this.props,p=s.imageURLs,u=s.currentImages,m=null,h=null,g=null;if(0===p.length&&u?g=d.a.createElement("div",null,d.a.createElement("p",null,d.a.createElement("i",null,"Loading media, if nothing appears after ten seconds. Please refresh the page"," ")),d.a.createElement($.a,null)):null===u&&(g=d.a.createElement("div",null,d.a.createElement("p",null,d.a.createElement("i",null,"Here is where you can add images to your website, Click upload media to create your media library")))),n&&!this.props.isModal&&(m=d.a.createElement(De.a,{onDrop:this.onDrop,multiple:!1,accept:"image/*"},function(e){var t=e.getRootProps,a=e.getInputProps,n=e.isDragActive;return d.a.createElement(at,Object.assign({},t(),{className:He()("dropzone",{"dropzone--isActive":n})}),d.a.createElement("input",a()),n?d.a.createElement("p",null,"Drop files here..."):d.a.createElement("p",null,"Try dropping some files here, or click to select files to upload."))})),this.props.isModal){var b="Current Selection:  ".concat(o);h=d.a.createElement(nt,null,g,d.a.createElement(Q.a,null,d.a.createElement(X.a,{opacity:i},d.a.createElement(Z.a,{onClick:function(){e.setState({customURL:!1})}},"Use Media Library")),d.a.createElement("h2",null,"OR .."),d.a.createElement(X.a,{opacity:!i},d.a.createElement(Z.a,{onClick:function(){e.setState({customURL:!0})}}," ",i?"Close":"Use"," custom URL location?"))),i?d.a.createElement(q.a,{inputtype:"input",label:"If you want to use an image stored elsewhere, enter the Url address below",value:r,onChange:this.handleCustomURL}):d.a.createElement("div",null,d.a.createElement(J.a,{elevation:5},d.a.createElement(Xe,{tileData:this.props.imageURLs,isModal:!0,selectedIndex:l,selectedImage:this.selectedImage})),d.a.createElement(q.a,{inputtype:"input",label:"".concat(c?b:"Select Media Image URL above"),value:c,disabled:!0,placeholder:"No Media image selected"})),d.a.createElement(ze.a,null),d.a.createElement("br",null),d.a.createElement(Q.a,null,d.a.createElement(Z.a,{onClick:this.props.handleClose},"Cancel"),d.a.createElement(Z.a,{onClick:this.confirmImage},"Confirm Image")),d.a.createElement("br",null))}else h=d.a.createElement("div",null,g,d.a.createElement(Z.a,{onClick:this.handleUploadOpen},n?"Close DropZone":"Upload Media"),m,a&&d.a.createElement("div",null,a),d.a.createElement(J.a,{elevation:7},d.a.createElement(Xe,{tileData:this.props.imageURLs,isModal:!1,selectedIndex:l,selectedImage:this.selectedImage,deleteImage:this.deleteImage})));return d.a.createElement(d.a.Fragment,null,h,d.a.createElement(Ue,{open:this.state.deleteImgOpen,handleClose:function(){return e.setState({deleteImgOpen:!1})},title:"Delete image",description:"Are you sure you would like to delete the image ".concat(this.state.selectedName,". \n Please note that anywhere this image is used on the website will no longer work once the image is deleted.")},d.a.createElement(Q.a,null,d.a.createElement(Z.a,{onClick:this.confirmDelete},"Confirm Delete"),d.a.createElement(Z.a,{onClick:function(){return e.setState({deleteImgOpen:!1})}},"Cancel"))))}}]),t}(u.Component),at=v.c.div(et()),nt=v.c.div($e()),it=tt,lt=a(456);function rt(){var e=Object(n.a)(["\n  width: 100%;\n"]);return rt=function(){return e},e}var ot=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).handleChange=function(e){e.preventDefault(),a.props.changeTemplateState(e.target,"template",null)},a.handlesubmit=function(e){e.preventDefault();var t="/".concat("infinitydjs","/site/template");a.props.templateChangeSubmit(t,a.props.template)},a.handleCheckbox=function(e){return function(t){console.log(e,t.target.checked);var n={name:t.target.name,value:t.target.checked};a.props.changeTemplateState(n,"template",null)}},a.handleMediaModal=function(e){e.preventDefault(),a.props.openMediaModal(e.target,"template",null)},a.clearInput=function(e){var t={name:e,value:""};a.props.changeTemplateState(t,"template",null)},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){if(!this.props.template)return d.a.createElement("div",null);var e=[{value:"contained"},{value:"outlined"}],t=this.props.template,a=t.navButtons,n=t.siteButtons,i=t.transparentHeader,l=t.navLightTheme,r=t.siteLogo;t.version;return d.a.createElement(ct,null,d.a.createElement(Q.a,null,d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Is the header toolbar transparent",name:"transparentHeader",checked:i,handleChange:this.handleCheckbox}),d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Use Light theme for navigation Bar",name:"navLightTheme",checked:l,handleChange:this.handleCheckbox})),d.a.createElement(q.a,{inputtype:"inputSelector",label:"Website Logo",name:"siteLogo",value:r,onChange:this.handleChange,onClick:this.handleMediaModal,clearInput:this.clearInput}),d.a.createElement("br",null),d.a.createElement(lt.a,{cols:"25% 25%",colsLarge:"35% 35%",colsMed:"50% 50%"},d.a.createElement(q.a,{inputtype:"select",label:"Header Navigation button style",name:"navButtons",value:a,items:e,onSelectChange:this.handleChange}),d.a.createElement(q.a,{inputtype:"select",label:"Webpage button style",name:"siteButtons",value:n,items:e,onSelectChange:this.handleChange}),d.a.createElement(Z.a,{variant:a},"contained"===a?"Contained Style":"Outlined Style"),d.a.createElement(Z.a,{variant:n},"contained"===n?"Contained Style":"Outlined Style")),d.a.createElement("br",null),d.a.createElement("hr",null),d.a.createElement("br",null),d.a.createElement(Q.a,{justifyContent:"flex-start"},d.a.createElement(Z.a,{margin:"2px 5px 15px 20px",onClick:this.handlesubmit},"Update"),this.props.isUpdating&&d.a.createElement($.a,null),this.props.stateBackup&&d.a.createElement(Z.a,{margin:"2px 20px 15px 20px",onClick:this.props.cancelUpdate},"Undo Changes")))}}]),t}(u.Component),ct=v.c.div(rt()),st=ot;function pt(){var e=Object(n.a)(["\n  padding: 3vh;\n  display: grid;\n  grid-gap: 8px;\n  grid-template-columns: 65% 35%;\n"]);return pt=function(){return e},e}function ut(){var e=Object(n.a)(["\n  display: block;\n  zoom: 30%;\n  padding-top: 56px;\n  box-shadow: 2px 2px 2px;\n\n  @media (max-width: 500px) {\n    display: none;\n  }\n"]);return ut=function(){return e},e}var dt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).state={previewOpen:!1},a.handleChange=function(e){e.preventDefault(),a.props.changeHomepageState(e.target,"home",null)},a.handlesubmit=function(e){e.preventDefault();var t="/".concat("infinitydjs","/site/home/content");a.props.homepageChangeSubmit(t,a.props.homePage.content)},a.handleCheckbox=function(e){return function(t){console.log(e,t.target.checked);var n={name:t.target.name,value:t.target.checked};a.props.changeHomepageState(n,"home",null)}},a.handleMediaModal=function(e){e.preventDefault(),a.props.openMediaModal(e.target,"home",null)},a.handleColourPicker=function(e){a.props.changeHomepageState(e.target,"home",null)},a.clearInput=function(e){var t={name:e,value:""};a.props.changeHomepageState(t,"home",null)},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){if(!this.props.homePage)return d.a.createElement("div",null);var e=this.props.homePage.content,t=e.topBanner,a=e.topBannerHalfwidth,n=e.topBannerImgSize,i=e.topBannerHWbackImg,l=e.topBannerHWBackColour,r=e.topBannerTxtRightSide,o=e.topBannerTxtLightTheme,c=e.topBannerLogo,s=e.topBannerfade,p=e.topBannerTitle,u=e.topBannerSubtitle,m=e.topBannerDescription,h=e.topBannerBtnText,g=e.topBannerLink,b=e.midBanner,v=e.midBannerHalfwidth,f=e.midBannerImgSize,C=e.midBannerHWbackImg,E=e.midBannerHWBackColour,k=e.midBannerTxtRightSide,x=e.midBannerTxtLightTheme,B=e.midBannerLogo,y=e.midBannerfade,I=e.midBannerTitle,S=e.midBannerSubtitle,O=e.midBannerDescription,w=e.midBannerBtnText,j=e.midBannerLink,T=(e.bottomBanner,e.mainText),P=e.mainTextPosition,M=e.mainTextCenterTitle,U=e.mainTextRightSide,L=e.mainTextBackColour,R=e.mainTextImg,D=e.mainTextImgAlign,A=e.mainTextImgWidth,H=e.mainTextImgHeight;return console.log("Homepage Props",this.props),d.a.createElement("div",{className:"fullwidth"},d.a.createElement(ht,null,d.a.createElement("div",null,d.a.createElement(q.a,{inputtype:"inputSelector",label:"".concat(a?"Top Banner Image (Inside Banner)":"Top Banner Image"),name:"topBanner",value:t,onChange:this.handleChange,onClick:this.handleMediaModal,clearInput:this.clearInput}),t&&d.a.createElement(ue,null,d.a.createElement(X.a,null,d.a.createElement(Q.a,null,d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Use the Top Banner image inside the Banner ",name:"topBannerHalfwidth",checked:a,handleChange:this.handleCheckbox})),a&&d.a.createElement(d.a.Fragment,null,d.a.createElement(q.a,{inputtype:"inputSelector",label:"Banner Background Image",name:"topBannerHWbackImg",value:i,onChange:this.handleChange,onClick:this.handleMediaModal,clearInput:this.clearInput}),d.a.createElement(Q.a,null,d.a.createElement(q.a,{inputtype:"input",type:"number",label:"Banner Image Size",name:"topBannerImgSize",value:n,onChange:this.handleChange}),d.a.createElement(q.a,{inputtype:"inputColourPicker",label:"Banner Background Colour",name:"topBannerHWBackColour",value:l,changeColour:this.handleColourPicker,pageId:"home"}))),d.a.createElement(Q.a,null,d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Banner Text Right Side",name:"topBannerTxtRightSide",checked:r,handleChange:this.handleCheckbox}),d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Banner Light Text Color",name:"topBannerTxtLightTheme",checked:o,handleChange:this.handleCheckbox})),d.a.createElement(Q.a,null,d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Use Logo in banner",name:"topBannerLogo",checked:c,handleChange:this.handleCheckbox}),d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Banner content fade in effect",name:"topBannerfade",checked:s,handleChange:this.handleCheckbox})),d.a.createElement(q.a,{inputtype:"input",label:"Banner Title",name:"topBannerTitle",value:p,onChange:this.handleChange}),d.a.createElement(q.a,{inputtype:"input",label:"Banner Subtitle",name:"topBannerSubtitle",value:u,onChange:this.handleChange}),d.a.createElement(q.a,{inputtype:"input",label:"Banner Description",name:"topBannerDescription",value:m,onChange:this.handleChange}),d.a.createElement(Q.a,null,d.a.createElement(q.a,{inputtype:"input",label:"Banner Button Text",name:"topBannerBtnText",value:h,onChange:this.handleChange}),d.a.createElement(q.a,{inputtype:"select",label:"Banner Link",name:"topBannerLink",value:g,items:this.props.availableRoutes,onSelectChange:this.handleChange})))),d.a.createElement(q.a,{inputtype:"inputSelector",label:"".concat(v?"Middle Banner Image (Inside Banner)":"Middle Banner Image"),name:"midBanner",value:b,onChange:this.handleChange,onClick:this.handleMediaModal,clearInput:this.clearInput}),b&&d.a.createElement(ue,null,d.a.createElement(X.a,null,d.a.createElement(Q.a,null,d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Use the Middle Banner image inside the Banner",name:"midBannerHalfwidth",checked:v,handleChange:this.handleCheckbox})),v&&d.a.createElement(d.a.Fragment,null,d.a.createElement(q.a,{inputtype:"inputSelector",label:"Banner Background Image",name:"midBannerHWbackImg",value:C,onChange:this.handleChange,onClick:this.handleMediaModal,clearInput:this.clearInput}),d.a.createElement(Q.a,null,d.a.createElement(q.a,{inputtype:"input",type:"number",label:"Banner Image Size",name:"midBannerImgSize",value:f,onChange:this.handleChange}),d.a.createElement(q.a,{inputtype:"inputColourPicker",label:"Banner Background Colour",name:"midBannerHWBackColour",value:E,changeColour:this.handleColourPicker,pageId:"home"}))),d.a.createElement(Q.a,null,d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Banner Text Right Side",name:"midBannerTxtRightSide",checked:k,handleChange:this.handleCheckbox}),d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Banner Light Text Color",name:"midBannerTxtLightTheme",checked:x,handleChange:this.handleCheckbox})),d.a.createElement(Q.a,null,d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Use Logo in banner",name:"midBannerLogo",checked:B,handleChange:this.handleCheckbox}),d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Banner content fade in effect",name:"midBannerfade",checked:y,handleChange:this.handleCheckbox})),d.a.createElement(q.a,{inputtype:"input",label:"Banner Title",name:"midBannerTitle",value:I,onChange:this.handleChange}),d.a.createElement(q.a,{inputtype:"input",label:"Banner Subtitle",name:"midBannerSubtitle",value:S,onChange:this.handleChange}),d.a.createElement(q.a,{inputtype:"input",label:"Banner Description",name:"midBannerDescription",value:O,onChange:this.handleChange}),d.a.createElement(Q.a,null,d.a.createElement(q.a,{inputtype:"input",label:"Banner Button Text",name:"midBannerBtnText",value:w,onChange:this.handleChange}),d.a.createElement(q.a,{inputtype:"select",label:"Banner Link",name:"midBannerLink",value:j,items:this.props.availableRoutes,onSelectChange:this.handleChange})))),d.a.createElement(q.a,{inputtype:"textarea",label:"Main Body Text",name:"mainText",value:T,onChange:this.handleChange}),d.a.createElement(ue,null,d.a.createElement(X.a,null,d.a.createElement(Q.a,null,d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Center Header text",name:"mainTextCenterTitle",checked:M,handleChange:this.handleCheckbox}),d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Align Text Right Side",name:"mainTextRightSide",checked:U,handleChange:this.handleCheckbox})),d.a.createElement(q.a,{inputtype:"select",label:"Main Text Page Position",name:"mainTextPosition",value:P,items:[{value:"Top"},{value:"Middle"},{value:"Bottom"}],onSelectChange:this.handleChange}),d.a.createElement(q.a,{inputtype:"inputSelector",label:"Add a Small Image",name:"mainTextImg",value:R,onChange:this.handleChange,onClick:this.handleMediaModal,clearInput:this.clearInput}),d.a.createElement(lt.a,{cols:"33% 33% 33%",margin:"0 15px 0 0"},d.a.createElement(q.a,{inputtype:"select",label:"Image align position",name:"mainTextImgAlign",value:D,items:[{value:"left"},{value:"right"}],onSelectChange:this.handleChange}),d.a.createElement(q.a,{inputtype:"input",type:"number",label:"Banner Image Width",name:"mainTextImgWidth",value:A||200,onChange:this.handleChange}),d.a.createElement(q.a,{inputtype:"input",type:"number",label:"Banner Image Height",name:"mainTextImgHeight",value:H||135,onChange:this.handleChange})),d.a.createElement(q.a,{inputtype:"inputColourPicker",label:"Banner Background Colour",name:"mainTextBackColour",value:L,changeColour:this.handleColourPicker,pageId:"home"})))),d.a.createElement(mt,null,d.a.createElement(he.a,Object.assign({pageInfo:this.props.homePage},this.props,{template:this.props.template,overlayBlocker:!0})))),d.a.createElement(Q.a,{justifyContent:"flex-start"},d.a.createElement(Z.a,{margin:"2px 5px 15px 20px",onClick:this.handlesubmit},"Update"),this.props.isUpdating&&d.a.createElement($.a,null),this.props.stateBackup&&d.a.createElement(Z.a,{margin:"2px 20px 15px 20px",onClick:this.props.cancelUpdate},"Undo Changes")))}}]),t}(u.Component),mt=v.c.div(ut()),ht=v.c.div(pt()),gt=dt,bt=a(493),vt=a.n(bt),ft=a(919),Ct=a.n(ft),Et=a(165),kt=a.n(Et),xt=a(917),Bt=a.n(xt),yt=a(923),It=a.n(yt),St=a(934),Ot=a.n(St);function wt(){var e=Object(n.a)(["\n    display: flex;\n    flex-wrap: wrap;    \n    margin: ",";\n\n    div {\n      /* margin: ","; */\n      width: ",";\n      /* min-width: ","; */\n      max-width: ",";\n\n      .chips {\n        min-width:auto;\n        display: flex;\n        flex-wrap: wrap;\n        \n\n        .chip{\n          margin: 2px;\n          flex-wrap: wrap;\n          width: auto;\n        }\n\n      }\n\n    }\n\n"]);return wt=function(){return e},e}var jt={PaperProps:{style:{maxHeight:224,width:250}}},Tt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).state={name:[]},a.handleChange=function(e){a.setState({name:e.target.value}),a.props.handleChange&&a.props.handleChange(e)},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.label,a=e.items,n=e.name,i=e.value,l=e.margin,r=e.width;return d.a.createElement(Pt,{margin:l,width:r},d.a.createElement(Bt.a,null,d.a.createElement(Ct.a,{htmlFor:"select-multiple-chip"},t),d.a.createElement(It.a,{multiple:!0,value:i||this.state.name,onChange:this.handleChange,input:d.a.createElement(vt.a,{id:"select-multiple-chip"}),name:n,renderValue:function(e){return d.a.createElement("div",{className:"chips"},e.map(function(e){return d.a.createElement(Ot.a,{key:e,label:e,className:"chip"})}))},MenuProps:jt},a.map(function(e){return d.a.createElement(kt.a,{key:e,value:e},e)}))))}}]),t}(d.a.Component),Pt=v.c.div(wt(),function(e){return e.margin||"8px"},function(e){return e.margin||"8px"},function(e){return e.width||"400px"},function(e){return e.minwidth||"200px"},function(e){return e.minwidth||"450px"}),Mt=Tt,Ut=function(e){if(!e.plugin)return d.a.createElement("div",null);var t=e.plugin,a=t.contactUsActive,n=t.contactUsPages,i=t.contactUsEmail;return console.log("contact us settings props",e),d.a.createElement("div",null,d.a.createElement(Q.a,null,d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Contact Us Plugin",parentObj:e.parentObj,name:"contactUsActive",checked:a,handleChange:e.handleCheckbox}),a&&d.a.createElement(Mt,{label:"Select the pages where this plugin is available",items:e.availableRoutes,name:"contactUsPages",value:n,handleChange:e.handleChange,margin:"0 10px 20px 15px"})),a&&d.a.createElement(ue,{padding:"20px"},d.a.createElement("div",null,d.a.createElement(q.a,{inputtype:"input",label:"Enter Business email where contact requests are received",parentObj:e.parentObj,name:"contactUsEmail",value:i,onChange:e.handleChange}))))},Lt=function(e){if(!e.plugin)return d.a.createElement("div",null);var t=e.plugin,a=t.bookingActive,n=t.bookingPages,i=t.bookingEmail,l=t.bookingForm,r=t.bookingCalendarID,o=t.bookingApiKey,c=t.bookingTimeSlotsAvailable,s=t.bookingTimeSlots,p=t.bookingGetCalandarAdvance,u=t.bookingSessions;return console.log("booking settings props",e),d.a.createElement("div",null,d.a.createElement(Q.a,null,d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Booking Plugin",parentObj:e.parentObj,name:"bookingActive",checked:a,handleChange:e.handleCheckbox}),a&&d.a.createElement(Mt,{label:"Select the pages where this plugin is available",items:e.availableRoutes,name:"bookingPages",value:n,handleChange:e.handleChange,margin:"0 10px 20px 15px"})),a&&d.a.createElement(ue,{emptyHeight:"200px",padding:"20px"},d.a.createElement("div",null,d.a.createElement(q.a,{inputtype:"input",label:"Enter Business email where bookings are received",parentObj:e.parentObj,name:"bookingEmail",value:i,onChange:e.handleChange}),d.a.createElement(q.a,{inputtype:"input",label:"Google Calendar Id",parentObj:e.parentObj,name:"bookingCalendarID",value:r,onChange:e.handleChange}),d.a.createElement(q.a,{inputtype:"input",label:"Google Calendar Api Key",parentObj:e.parentObj,name:"bookingApiKey",value:o,onChange:e.handleChange}),d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Include Contact form with booking calendar",parentObj:e.parentObj,name:"bookingForm",checked:l,handleChange:e.handleCheckbox}),d.a.createElement("br",null),d.a.createElement("h2",null,"Booking Calandar options"),d.a.createElement(q.a,{inputtype:"checkbox",sideLabel:"Timeslots available (leave unticked if booking times do not repeat)",parentObj:e.parentObj,name:"bookingTimeSlotsAvailable",checked:c,handleChange:e.handleCheckbox}),c&&d.a.createElement(q.a,{inputtype:"input",label:"Enter the timeslots when events can be booked on a daily bases",parentObj:e.parentObj,name:"bookingTimeSlots",value:s,placeholder:"eg 24 hour format..  09:30-10:00, 10:00-10:30, 14:30-15:00",onChange:e.handleChange}),d.a.createElement(q.a,{inputtype:"select",label:"Select how far in the future customers can book",value:p,name:"bookingGetCalandarAdvance",items:[{value:"1 month"},{value:"2 months"},{value:"3 months"},{value:"6 months"},{value:"9 months"},{value:"12 months"}],onSelectChange:e.handleChange}),d.a.createElement(q.a,{inputtype:"input",type:"number",label:c?"Booking sessions available per timeslot":"Booking sessions available per day",parentObj:e.parentObj,name:"bookingSessions",value:u,placeholder:c?'eg. Entering "6" will allow 6 bookings per timeslot':'eg. Entering "6" will allow 6 bookings per day',onChange:e.handleChange}))))};function Rt(){var e=Object(n.a)(["\n  width: 100%;\n"]);return Rt=function(){return e},e}var Dt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={contactUsPlugin:!1},a.accordianClick=function(e){a.setState(Object(i.a)({},e,!a.state[e]))},a.handleChange=function(e,t){a.props.changePluginState(e.target,"plugins",t)},a.handleCheckbox=function(e,t){return function(n){console.log(e,t,n.target.checked);var i={name:n.target.name,value:n.target.checked};a.props.changePluginState(i,"plugins",t)}},a.handlesubmit=function(e){e.preventDefault();var t="/".concat("infinitydjs","/site/plugins");a.props.pluginsChangeSubmit(t,a.props.plugins)},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.plugins)return d.a.createElement("div",null,d.a.createElement($.a,null));console.log("plugins props",this.props);var t=this.props.availableRoutes.map(function(e){return("/"===e.value?"home":e.value).split("/").pop()});return t.unshift("All Pages"),d.a.createElement("div",null,d.a.createElement(At,null,d.a.createElement(Ut,{plugin:this.props.plugins.contactUs,name:"contactUsPlugin",parentObj:"contactUs",availableRoutes:t,accordianClick:this.accordianClick,handleCheckbox:this.handleCheckbox,handleChange:function(t){return e.handleChange(t,"contactUs")}}),d.a.createElement("br",null),d.a.createElement("br",null),d.a.createElement(Lt,{plugin:this.props.plugins.booking,name:"bookingPlugin",parentObj:"booking",availableRoutes:t,accordianClick:this.accordianClick,handleCheckbox:this.handleCheckbox,onSelectChange:this.onSelectChange,handleChange:function(t){return e.handleChange(t,"booking")}})),d.a.createElement(Q.a,{justifyContent:"flex-start"},d.a.createElement(Z.a,{margin:"2px 5px 15px 20px",onClick:this.handlesubmit},"Update"),this.props.isUpdating&&d.a.createElement($.a,null),this.props.stateBackup&&d.a.createElement(Z.a,{margin:"2px 20px 15px 20px",onClick:this.props.cancelUpdate},"Undo Changes")))}}]),t}(u.Component),At=v.c.div(Rt()),Ht=Dt,Wt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.onFormChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(i.a)({},n,l))},a.submitHandler=function(e){e.preventDefault(),a.props.onAuth(a.state.email,a.state.password,a.props.admin)},a.backToHome=function(){a.props.history.push("/")},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.isAuthenticated!==e.isAuthenticated&&this.props.isTimedOut()}},{key:"render",value:function(){console.log("AuthModal page props",this.props);var e=null;return this.props.error&&(e=d.a.createElement("p",null,this.props.error)),d.a.createElement("div",null,d.a.createElement("div",null,"Administrator Login"),d.a.createElement("br",null),d.a.createElement(q.a,{inputtype:"input",placeholder:"email",name:"email",value:this.state.email,onChange:this.onFormChange}),d.a.createElement(q.a,{inputtype:"input",placeholder:"password",name:"password",value:this.state.password,onChange:this.onFormChange}),e,d.a.createElement("br",null),d.a.createElement(Q.a,null,d.a.createElement(Z.a,{onClick:this.backToHome},"Cancel"),d.a.createElement(Z.a,{onClick:this.submitHandler},"Submit")),this.props.loading&&d.a.createElement($.a,null))}}]),t}(u.Component),zt=Object(m.connect)(function(e){return{loading:e.auth.loading,error:e.auth.error,admin:e.mainState.admin,isAuthenticated:null!==e.auth.userId}},function(e){return{onAuth:function(t,a,n){return e(h.a(t,a,n))}}})(Wt);function Nt(){var e=Object(n.a)(["\n  background-color: #424242;\n  min-height: 100vh;\n  padding: 100px 50px;\n  margin-top: -75px;\n\n  .admin-title {\n    color: #f5f5f5;\n  }\n"]);return Nt=function(){return e},e}var _t=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={homepage_accordian:!1,navigation_accordian:!1,template_accordian:!1,media_accordian:!1,showSignIn:!1,newPageOpen:!1,deletePageModal:!1,pageToDelete:null,openMediaModal:!1,mediaModalTabItemRef:[],mediaImages:[],newPageToast:null,loading:!1,error:null},a.logoutHandler=function(){b.a.auth().signOut().then(function(){console.log("Signed Out")},function(e){console.error("Sign Out Error",e)}),a.props.onLogoutClick()},a.openMediaModal=function(e,t,n){console.log("opneMedia Modal",e,t,n),a.setState({openMediaModal:!0,mediaModalTabItemRef:[e,t,n]})},a.closeMediaModal=function(){a.setState({openMediaModal:!1})},a.setMediaImages=function(e){a.setState({mediaImages:e})},a.handleNewPageButton=function(e){e.preventDefault(),a.setState({newPageOpen:!a.state.newPageOpen})},a.submitNewPage=function(e){console.log("newPage_State",e);var t=e.title,n=e.checked,l=e.selectVal,r=a.props.navigationItems,o=t.replace(/ /g,"-").toLowerCase(),c={id:Date.now(),mainText:"This is your newly added ".concat(t," page")},s="/".concat("infinitydjs","/site/navigationItems"),u={title:t,route:o,selected:!1,content:c};if(n){var d=null;for(var m in r)r[m].title===l&&(d=m);s="/".concat("infinitydjs","/site/navigationItems/").concat(d,"/dropdownPages"),u={title:t,route:o,content:c}}a.setState({loading:!0,error:null},function(){var e=Object(p.a)(Object(p.a)(a)),t=b.a.database().ref().child(s).push().key,n=Object(i.a)({},t,u);b.a.database().ref().child(s).update(n,function(t){t?e.setState({loading:!1,error:t.code,newPageOpen:!1,showSignIn:!0}):(console.log("new page added successfully!"),e.setState({loading:!1,error:null,newPageOpen:!1,newPageToast:"New Page added successfully"}),e.props.onInitWebsiteState())})})},a.handleDeletePageModal=function(e,t){a.state.deletePageModal?a.setState({deletePageModal:!1,pageToDelete:null}):a.setState({deletePageModal:!0,pageToDelete:{id:e,parentId:t}})},a.submitDeletePage=function(){console.log(a.state.pageToDelete);var e=Object(p.a)(Object(p.a)(a)),t=a.state.pageToDelete,n=t.id,i=t.parentId,l="/".concat("infinitydjs","/site/navigationItems/").concat(n);i&&(l="/".concat("infinitydjs","/site/navigationItems/").concat(i,"/dropdownPages/").concat(n)),b.a.database().ref(l).remove().then(function(){console.log("Remove succeeded."),e.props.onInitWebsiteState(),e.setState({deletePageModal:!1,pageToDelete:null})}).catch(function(e){console.log("Remove failed: "+e.message)})},a.updatePage=function(e,t,n){console.log(e.value,t,n),a.props.onChangePageState(e,t,n)},a.updatePageSubmit=function(e,t,n){console.log(e,t,n);var i=n?"/".concat("infinitydjs","/site/navigationItems/").concat(n,"/dropdownPages/").concat(t,"/content"):"/".concat("infinitydjs","/site/navigationItems/").concat(t,"/content");b.a.auth().currentUser?(console.log("user is signed in"),a.props.onUpdatePageSubmit(i,e)):(console.log(" No user is signed in."),a.setState({showSignIn:!0,error:"Permission denied. Please sign in again to Re-authenticate"}))},a.timedOutUser=function(){b.a.auth().currentUser?a.setState({showSignIn:!1}):(console.log(" No user is signed in."),a.setState({showSignIn:!0}))},a.accordianClick=function(e){a.setState(Object(i.a)({},e,!a.state[e]))},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentWillMount",value:function(){console.log("adminPage - sitename","infinitydjs"),this.props.isAuthenticated||this.props.history.push("/authenticate-admin"),b.a.auth().currentUser?console.log("user is signed in"):console.log(" No user is signed in.")}},{key:"componentDidUpdate",value:function(e){e.isAuthenticated&&!this.props.isAuthenticated&&this.props.history.push("/authenticate-admin")}},{key:"render",value:function(){var e=this;console.log("Admin Page props",this.props);var t=this.state,a=t.media_accordian,n=t.template_accordian,i=t.homepage_accordian,l=t.navigation_accordian,r=t.plugins_accordian;return d.a.createElement(Ft,null,d.a.createElement(Q.a,{justifyContent:"space-between"},d.a.createElement("h1",{className:"admin-title"},"Admin Page"),d.a.createElement(Z.a,{onClick:this.logoutHandler},"logout")),d.a.createElement(Ue,{open:this.state.showSignIn,title:"You have been logged out",description:"Your administrator session has expired you will need to log back in to continue"},d.a.createElement(zt,{history:this.props.history,isTimedOut:this.timedOutUser})),d.a.createElement("div",null,d.a.createElement(w,{title:"Media",name:"media_accordian",onClick:function(t){return e.accordianClick(t)}},a&&d.a.createElement(it,{isAuthenticated:this.props.isAuthenticated,isTimedOut:this.timedOutUser,currentImages:this.props.images,refreshState:this.props.onInitWebsiteState,isModal:!1,imageURLs:this.state.mediaImages,setMediaImages:this.setMediaImages})),d.a.createElement("br",null),d.a.createElement(w,{title:"Template",name:"template_accordian",onClick:function(t){return e.accordianClick(t)}},n&&d.a.createElement(st,{template:this.props.template,changeTemplateState:this.props.onChangePageState,templateChangeSubmit:this.props.onUpdatePageSubmit,isUpdating:this.props.isUpdating,isError:this.props.isError,stateBackup:this.props.stateBackup,cancelUpdate:this.props.onRevertChanges,openMediaModal:this.openMediaModal})),d.a.createElement("br",null),d.a.createElement(w,{title:"Homepage",name:"homepage_accordian",onClick:function(t){return e.accordianClick(t)}},i&&d.a.createElement(gt,{homePage:this.props.home,changeHomepageState:this.props.onChangePageState,homepageChangeSubmit:this.props.onUpdatePageSubmit,isUpdating:this.props.isUpdating,isError:this.props.isError,stateBackup:this.props.stateBackup,cancelUpdate:this.props.onRevertChanges,openMediaModal:this.openMediaModal,availableRoutes:this.props.availableRoutes,template:this.props.template,plugins:this.props.plugins})),d.a.createElement("br",null),d.a.createElement(w,{title:"Navigation and Pages",name:"navigation_accordian",onClick:function(t){return e.accordianClick(t)}},l&&d.a.createElement("div",{className:"fullwidth"},d.a.createElement(Z.a,{onClick:this.handleNewPageButton},"Add a new page"),d.a.createElement(Ue,{open:this.state.newPageOpen,navigationItems:this.props.navigationItems,handleClose:this.handleNewPageButton,title:"Add a new Webpage",description:"Here you can add a new page to your website which will show in the header navigation. You can also make the new page a subpage of another navigation link"},d.a.createElement(Le,{loading:this.state.loading,navigationItems:this.props.navigationItems,handleClose:this.handleNewPageButton,handleSubmit:this.submitNewPage})),d.a.createElement(Ue,{open:this.state.deletePageModal,navigationItems:this.props.navigationItems,handleClose:this.handleDeletePageModal,title:"Delete Webpage",description:"You are about to delete selected page this is a permanent action, would you like to continue with deleting this page"},d.a.createElement(Q.a,null,d.a.createElement(Z.a,{onClick:this.submitDeletePage},"Delete"),d.a.createElement(Z.a,{onClick:this.handleDeletePageModal},"Cancel"))),d.a.createElement("br",null),d.a.createElement("br",null),d.a.createElement(Be,{navigationItems:this.props.navigationItems,updatePageSubmit:this.updatePageSubmit,onChange:this.updatePage,openMediaModal:this.openMediaModal,handlePageDelete:this.handleDeletePageModal,isUpdating:this.props.isUpdating,cancelUpdate:this.props.onRevertChanges,isError:this.props.isError,stateBackup:this.props.stateBackup,availableRoutes:this.props.availableRoutes,template:this.props.template,plugins:this.props.plugins}),d.a.createElement("br",null))),d.a.createElement("br",null),d.a.createElement(w,{title:"Plugins",name:"plugins_accordian",onClick:function(t){return e.accordianClick(t)}},r&&d.a.createElement(Ht,{plugins:this.props.plugins,changePluginState:this.props.onChangePageState,pluginsChangeSubmit:this.props.onUpdatePageSubmit,availableRoutes:this.props.availableRoutes,isUpdating:this.props.isUpdating,isError:this.props.isError,stateBackup:this.props.stateBackup,cancelUpdate:this.props.onRevertChanges})),d.a.createElement(Ue,{open:this.state.openMediaModal,title:"Choose an image",description:"Select the media location you would like to use",handleClose:this.closeMediaModal},d.a.createElement(it,{isModal:!0,isAuthenticated:this.props.isAuthenticated,handleClose:this.closeMediaModal,currentImages:this.props.images,imageURLs:this.state.mediaImages,setMediaImages:this.setMediaImages,tabItemReference:this.state.mediaModalTabItemRef,onChangePageState:this.props.onChangePageState}))),null!==this.state.newPageToast&&d.a.createElement(Y,{message:this.state.newPageToast}),null!==this.props.updatePageToast&&d.a.createElement(Y,{message:this.props.updatePageToast}),this.state.error&&d.a.createElement(Y,{message:this.state.error,error:!0}))}}]),t}(u.Component),Ft=v.c.div(Nt());t.a=Object(m.connect)(function(e){return{isAuthenticated:null!==e.auth.userId,userId:e.auth.userId,home:e.mainState.home,navigationItems:e.mainState.navigationItems,images:e.mainState.images,stateBackup:e.mainState.state_copy,updatePageToast:e.admin.pageUpdateToast,isUpdating:e.admin.loading,isError:e.admin.error,availableRoutes:e.admin.routes,template:e.mainState.template,plugins:e.mainState.plugins}},function(e){return{onInitWebsiteState:function(){return e(h.c())},onLogoutClick:function(){return e(h.d())},onChangePageState:function(t,a,n){return e(h.b(t,a,n))},onUpdatePageSubmit:function(t,a){return e(h.g(t,a))},onRevertChanges:function(){return e(h.e())}}})(_t)},944:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(34),r=a(117),o=a(579);t.default=Object(l.connect)(function(e){return{currentUser:e.auth.currentUser}},null)(function(e){e.currentUser;return i.a.createElement(r.a,{id:"admin",title:"Admin",noCrawl:!0},i.a.createElement(o.a,null))})},945:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(117),r=a(579);t.default=function(e){return console.log("admin_TEST.props",e),i.a.createElement(l.a,{id:"admin",title:"Admin",noCrawl:!0},i.a.createElement(r.a,e))}}}]);
//# sourceMappingURL=admin.d24122cb.chunk.js.map