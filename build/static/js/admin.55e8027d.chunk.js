(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{558:function(e,t,a){"use strict";var n=a(7),l=a(14),i=a(21),r=a(22),o=a(24),c=a(23),s=a(25),p=a(114),u=a(0),d=a.n(u),m=a(32),h=a(84),g=a(38),b=a.n(g),E=(a(174),a(112),a(6)),v=a(851),C=a.n(v),f=a(854),k=a.n(f),B=a(857),x=a.n(B),I=a(856),y=a.n(I);function S(){var e=Object(n.a)(['\n    margin: 15px 5px;\n  \n    /* > div {\n        height: 20px !important;\n        width: 20px !important;\n        margin: "theme.spacing.unit * 2";\n        color: ',";\n\n    } */\n"]);return S=function(){return e},e}var O=E.c.div(S(),function(e){return e.theme.primaryBackGroundColour}),T=function(e){return d.a.createElement(O,null,d.a.createElement(C.a,{onChange:function(){return e.onClick(e.name)}},d.a.createElement(k.a,{expandIcon:d.a.createElement(y.a,null)},d.a.createElement("div",null,e.title)),d.a.createElement(x.a,null,e.children?e.children:d.a.createElement("div",null))))},P=a(866),w=a.n(P),j=a(868),U=a.n(j),M=a(861),L=a.n(M),R=a(863),A=a.n(R),D=a(458),N=a(388),_=a.n(N),H=a(376),W=a(54),z=a(107);function V(){var e=Object(n.a)(["\n  margin: ",";\n  opacity: ",";\n"]);return V=function(){return e},e}var F=E.c.div(V(),function(e){return e.margin||"20px"},function(e){return e.opacity}),Y=function(e){var t=e.opacity||!1;return d.a.createElement(F,{margin:e.margin,opacity:t?"0.5":"1"},e.children)},G=a(378),K=a(860),J=a.n(K),q=a(859),Z=a.n(q),Q=a(381),X=a.n(Q),$=a(548),ee=a.n($);function te(){var e=Object(n.a)(["\n  border: 2px solid rgba(0, 0, 0, 0.2);\n  border-top: 0;\n  border-bottom-left-radius: 8px;\n  border-bottom-right-radius: 8px;\n  margin-bottom: 35px;\n\n  > div small {\n    cursor: pointer;\n  }\n\n  .minimized_children {\n    padding: ",";\n  }\n"]);return te=function(){return e},e}function ae(){var e=Object(n.a)(["\n  height: ",";\n"]);return ae=function(){return e},e}var ne=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(l)))).state={isOpen:!1},a.handleMinimizer=function(){a.setState({isOpen:!a.state.isOpen})},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.state.isOpen;return d.a.createElement(ie,{padding:this.props.padding},d.a.createElement(z.a,{margin:"0"},d.a.createElement(X.a,{"aria-label":"Add",color:"primary",onClick:this.handleMinimizer},e?d.a.createElement(Z.a,null):d.a.createElement(J.a,null)),e?d.a.createElement("small",{onClick:this.handleMinimizer},"Click to minimise options"):d.a.createElement("small",{onClick:this.handleMinimizer},"Click to expand further options")),d.a.createElement(ee.a,{in:e},e?d.a.createElement("div",{className:"minimized_children"},this.props.children):d.a.createElement(le,{emptyHeight:this.props.emptyHeight})))}}]),t}(u.Component),le=E.c.div(ae(),function(e){return e.emptyHeight||"500px"}),ie=E.c.div(te(),function(e){return e.padding||"auto"}),re=ne,oe=a(549),ce=a.n(oe),se=a(475);function pe(){var e=Object(n.a)(["\n  padding: 5px;\n"]);return pe=function(){return e},e}function ue(){var e=Object(n.a)(["\n  display: block;\n  zoom: 30%;\n  padding-top: 56px;\n  box-shadow: 2px 2px 2px;\n\n  @media (max-width: 500px) {\n    display: none;\n  }\n"]);return ue=function(){return e},e}function de(){var e=Object(n.a)(["\n  padding: 3vh;\n  display: grid;\n  grid-template-columns: 65% 35%;\n  grid-gap: 8px;\n"]);return de=function(){return e},e}var me=E.c.div(de()),he=E.c.div(ue()),ge=E.c.div(pe()),be=function(e){if(console.log("tabItems props",e),e.itemProps.dropdownPages)return d.a.createElement(ve,{navigationItems:e.itemProps.dropdownPages,parentId:e.pageId,parent:e.children,onChange:e.onChange,handlePageDelete:e.handlePageDelete,openMediaModal:e.openMediaModal,updatePageSubmit:e.updatePageSubmit,isUpdating:e.isUpdating,cancelUpdate:e.cancelUpdate,stateBackup:e.stateBackup,availableRoutes:e.availableRoutes,template:e.template,plugins:e.plugins});var t=function(t){t.preventDefault(),e.onChange(t.target,e.pageId,e.parentId)},a=function(t){return function(a){console.log(t,a.target.checked);var n={name:a.target.name,value:a.target.checked};e.onChange(n,e.pageId,e.parentId)}},n=function(t){t.preventDefault(),e.openMediaModal(t.target,e.pageId,e.parentId)},l=function(t){e.onChange(t.target,e.pageId,e.parentId)},i=function(t){var a={name:t,value:""};e.onChange(a,e.pageId,e.parentId)},r=e.itemProps.content,o=r.topBanner,c=r.topBannerHalfwidth,s=r.topBannerImgSize,p=r.topBannerHWbackImg,u=r.topBannerHWBackColour,m=r.topBannerTxtRightSide,h=r.topBannerTxtLightTheme,g=r.topBannerLogo,b=r.topBannerfade,E=r.topBannerTitle,v=r.topBannerSubtitle,C=r.topBannerDescription,f=r.topBannerBtnText,k=r.topBannerLink,B=r.midBanner,x=r.midBannerHalfwidth,I=r.midBannerImgSize,y=r.midBannerHWbackImg,S=r.midBannerHWBackColour,O=r.midBannerTxtRightSide,T=r.midBannerTxtLightTheme,P=r.midBannerLogo,w=r.midBannerfade,j=r.midBannerTitle,U=r.midBannerSubtitle,M=r.midBannerDescription,L=r.midBannerBtnText,R=r.midBannerLink,A=(r.bottomBanner,r.mainText);return d.a.createElement(_.a,{elevation:20},d.a.createElement(me,null,d.a.createElement("div",null,e.children,d.a.createElement(H.a,{inputtype:"inputSelector",label:"".concat(c?"Top Banner Image (Inside Banner)":"Top Banner Image"),name:"topBanner",value:o,onChange:t,onClick:n,clearInput:i}),o&&d.a.createElement(re,null,d.a.createElement(Y,null,d.a.createElement(z.a,null,d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Use the Top Banner image inside the Banner ",name:"topBannerHalfwidth",checked:c,handleChange:a})),c&&d.a.createElement(d.a.Fragment,null,d.a.createElement(H.a,{inputtype:"inputSelector",label:"Banner Background Image",name:"topBannerHWbackImg",value:p,onChange:t,onClick:n,clearInput:i}),d.a.createElement(z.a,null,d.a.createElement(H.a,{inputtype:"input",type:"number",label:"Banner Image Size",name:"topBannerImgSize",value:s,onChange:t}),d.a.createElement(H.a,{inputtype:"inputColourPicker",label:"Banner Background Colour",name:"topBannerHWBackColour",value:u,changeColour:l,pageId:"home"}))),d.a.createElement(z.a,null,d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Banner Text Right Side",name:"topBannerTxtRightSide",checked:m,handleChange:a}),d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Banner Light Text Color",name:"topBannerTxtLightTheme",checked:h,handleChange:a})),d.a.createElement(z.a,null,d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Use Logo in banner",name:"topBannerLogo",checked:g,handleChange:a}),d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Banner content fade in effect",name:"topBannerfade",checked:b,handleChange:a})),d.a.createElement(H.a,{inputtype:"input",label:"Banner Title",name:"topBannerTitle",value:E,onChange:t}),d.a.createElement(H.a,{inputtype:"input",label:"Banner Subtitle",name:"topBannerSubtitle",value:v,onChange:t}),d.a.createElement(H.a,{inputtype:"input",label:"Banner Description",name:"topBannerDescription",value:C,onChange:t}),d.a.createElement(z.a,null,d.a.createElement(H.a,{inputtype:"input",label:"Banner Button Text",name:"topBannerBtnText",value:f,onChange:t}),d.a.createElement(H.a,{inputtype:"select",label:"Banner Link",name:"topBannerLink",value:k,items:e.availableRoutes,onSelectChange:t})))),d.a.createElement(H.a,{inputtype:"inputSelector",label:"".concat(x?"Middle Banner Image (Inside Banner)":"Middle Banner Image"),name:"midBanner",value:B,onChange:t,onClick:n,clearInput:i}),B&&d.a.createElement(re,null,d.a.createElement(Y,null,d.a.createElement(z.a,null,d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Use the Middle Banner image inside the Banner",name:"midBannerHalfwidth",checked:x,handleChange:a})),x&&d.a.createElement(d.a.Fragment,null,d.a.createElement(H.a,{inputtype:"inputSelector",label:"Banner Background Image",name:"midBannerHWbackImg",value:y,onChange:t,onClick:n,clearInput:i}),d.a.createElement(z.a,null,d.a.createElement(H.a,{inputtype:"input",type:"number",label:"Banner Image Size",name:"midBannerImgSize",value:I,onChange:t}),d.a.createElement(H.a,{inputtype:"inputColourPicker",label:"Banner Background Colour",name:"midBannerHWBackColour",value:S,changeColour:l,pageId:"home"}))),d.a.createElement(z.a,null,d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Banner Text Right Side",name:"midBannerTxtRightSide",checked:O,handleChange:a}),d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Banner Light Text Color",name:"midBannerTxtLightTheme",checked:T,handleChange:a})),d.a.createElement(z.a,null,d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Use Logo in banner",name:"midBannerLogo",checked:P,handleChange:a}),d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Banner content fade in effect",name:"midBannerfade",checked:w,handleChange:a})),d.a.createElement(H.a,{inputtype:"input",label:"Banner Title",name:"midBannerTitle",value:j,onChange:t}),d.a.createElement(H.a,{inputtype:"input",label:"Banner Subtitle",name:"midBannerSubtitle",value:U,onChange:t}),d.a.createElement(H.a,{inputtype:"input",label:"Banner Description",name:"midBannerDescription",value:M,onChange:t}),d.a.createElement(z.a,null,d.a.createElement(H.a,{inputtype:"input",label:"Banner Button Text",name:"midBannerBtnText",value:L,onChange:t}),d.a.createElement(H.a,{inputtype:"select",label:"Banner Link",name:"midBannerLink",value:R,items:e.availableRoutes,onSelectChange:t})))),d.a.createElement(H.a,{inputtype:"textarea",label:"Main Body Text",name:"mainText",value:A,onChange:t})),d.a.createElement(he,null,d.a.createElement(se.a,Object.assign({pageInfo:e.itemProps},e,{template:e.template,plugins:e.plugins,overlayBlocker:!0})))),d.a.createElement(z.a,{justifyContent:"space-between"},d.a.createElement("div",null,d.a.createElement(z.a,{justifyContent:"flex-start"},d.a.createElement(W.a,{margin:"2px 5px 15px 20px",onClick:function(t){t.preventDefault(),e.updatePageSubmit(e.itemProps.content,e.pageId,e.parentId)}},"Update"),e.isUpdating&&d.a.createElement(G.a,null),e.stateBackup&&d.a.createElement(W.a,{margin:"2px 20px 15px 20px",onClick:e.cancelUpdate},"Undo Changes"))),d.a.createElement(ge,null,d.a.createElement(X.a,{onClick:function(){e.handlePageDelete(e.pageId,e.parentId)}},d.a.createElement(ce.a,{fontSize:"large"})))))};function Ee(){var e=Object(n.a)(["\n  > header {\n    background-color: ",";\n    z-index: 20;\n  }\n"]);return Ee=function(){return e},e}var ve=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(l)))).state={value:0,disableTabText:"",topBannerOptions:!0,midBannerOptions:!0,bottomBannerOptions:!0},a.handleChange=function(e,t){a.props.stateBackup||a.setState({value:t})},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.stateBackup!==e.stateBackup&&(this.props.stateBackup?this.setState({disableTabText:"You have made updates to this page, please save or undo your changes before selecting a new page"}):this.setState({disableTabText:""}))}},{key:"render",value:function(){var e=this,t=this.state.value,a=this.props,n=a.navigationItems,l=a.parent,i=a.parentId;console.log("tabMenu props",this.props);var r=null,o=null;return null!==n&&(r=Object.keys(n).map(function(e,t){var a=n[e];return d.a.createElement(L.a,{key:t,label:l?l.props.children+" - "+a.title:a.title})}),o=Object.keys(n).map(function(a,l){return t===l&&d.a.createElement(be,{key:l,pageId:a,parentId:i||null,itemProps:n[a],onChange:e.props.onChange,handlePageDelete:e.props.handlePageDelete,openMediaModal:e.props.openMediaModal,updatePageSubmit:e.props.updatePageSubmit,isUpdating:e.props.isUpdating,cancelUpdate:e.props.cancelUpdate,stateBackup:e.props.stateBackup,availableRoutes:e.props.availableRoutes,template:e.props.template,plugins:e.props.plugins},d.a.createElement("h2",null,n[a].title))})),null===o&&null===r?d.a.createElement("div",null):d.a.createElement(Ce,null,d.a.createElement(A.a,{title:this.state.disableTabText},d.a.createElement(w.a,{position:"static"},d.a.createElement(U.a,{value:t,onChange:this.handleChange,variant:"scrollable",scrollButtons:"auto"},r))),o,this.props.isError&&d.a.createElement(D.a,{message:this.props.isError,error:!0}))}}]),t}(u.Component),Ce=E.c.div(Ee(),function(e){return e.theme.primaryBackGroundColour}),fe=a(878),ke=a.n(fe),Be=a(887),xe=a.n(Be),Ie=a(889),ye=a.n(Ie),Se=a(885),Oe=a.n(Se),Te=function(e){var t=!e.fullWidth||e.fullWidth,a=e.maxWidth?e.maxWidth:"lg";return d.a.createElement("div",null,d.a.createElement(ke.a,{open:e.open,onClose:e.handleClose,"aria-labelledby":"form-dialog-title",fullWidth:t,maxWidth:a},d.a.createElement(Oe.a,{id:"form-dialog-title"},e.title),d.a.createElement(xe.a,null,d.a.createElement(ye.a,null,e.description),d.a.createElement("br",null),d.a.createElement("br",null),e.children)))},Pe=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",checked:!1,selectVal:null},a.handleCheckbox=function(e){return function(t){a.setState(Object(l.a)({},e,t.target.checked))}},a.onSelectChange=function(e){a.setState({selectVal:e.target.value})},a.onInputChange=function(e){var t=e.target,n=t.value,i=t.name,r=n.replace(/[^\w\s]/gi,"");a.setState(Object(l.a)({},i,r))},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){if(null!==this.props.navigationItems){var e="";for(var t in this.props.navigationItems){e=this.props.navigationItems[t].title;break}this.setState({selectVal:e})}}},{key:"render",value:function(){var e=this;return console.log("newpageForm props",this.props),d.a.createElement("div",null,d.a.createElement("form",null,d.a.createElement(H.a,{inputtype:"input",label:"Page Title",name:"title",value:this.state.title,onChange:this.onInputChange}),null!==this.props.navigationItems&&d.a.createElement("div",null,d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Is this a dropdown SubPage",checked:this.state.checked,handleChange:this.handleCheckbox}),d.a.createElement("br",null),this.state.checked&&d.a.createElement(H.a,{inputtype:"select",value:this.state.selectVal,label:"Choose the parent page for this Subpage",items:this.props.navigationItems,onSelectChange:this.onSelectChange}))),d.a.createElement(z.a,{justifyContent:"flex-end",margin:"5px"},d.a.createElement(W.a,{onClick:this.props.handleClose},"Cancel"),d.a.createElement(W.a,{onClick:function(){return e.props.handleSubmit(e.state)},disabled:""===this.state.title},"Confirm"),this.props.loading&&d.a.createElement(G.a,null)))}}]),t}(u.Component),we=a(105),je=a(923),Ue=(a(179),a(36)),Me=a.n(Ue),Le=a(900),Re=a.n(Le),Ae=a(892),De=a.n(Ae),Ne=a(894),_e=a.n(Ne),He=a(898),We=a.n(He),ze=a(896),Ve=a.n(ze);function Fe(){var e=Object(n.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  /* justify-content: space-around; */\n  overflow: hidden;\n  margin: 20px 0;\n  padding: 10px;\n\n  .gridlist {\n    width: 100%;\n    height: 450px;\n  }\n\n  .media {\n    padding: 3px;\n    cursor: pointer;\n    -webkit-transition: border 0.2s ease-in-out, box-shadow 0.2s ease-in-out;\n    -moz-transition: border 0.2s ease-in-out, box-shadow 0.2s ease-in-out;\n    -ms-transition: border 0.2s ease-in-out, box-shadow 0.2s ease-in-out;\n    -o-transition: border 0.2s ease-in-out, box-shadow 0.2s ease-in-out;\n    transition: border 0.2s ease-in-out, box-shadow 0.2s ease-in-out;\n  }\n\n  .media.active {\n    border: 1px solid #09c;\n    border-radius: 5px;\n    box-shadow: 1px 1px 7px rgba(0, 200, 204, 0.7);\n    outline: none;\n  }\n\n  .gridIcon {\n    color: rgba(255, 255, 255, 0.54);\n  }\n"]);return Fe=function(){return e},e}var Ye=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(l)))).state={columns:5,spacing:20,activeIndex:null,selectedValue:"",selectedName:""},a.handleResize=function(){var e=window.innerWidth,t=(e>768?5:e<=480&&1)||3,n=e>768?20:8;a.setState({columns:t,spacing:n})},a.handleSelect=function(e,t,n){a.props.selectedImage(t,n)},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),this.handleResize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=this,t=this.props.tileData;return t&&t.length?d.a.createElement(Ge,null,d.a.createElement(De.a,{cellHeight:180,className:"gridList",cols:this.state.columns,spacing:this.state.spacing},d.a.createElement(_e.a,{key:"Subheader",cols:this.state.columns,style:{height:"auto"}},d.a.createElement(Ve.a,{component:"div"},"This is where your current websites images located.")),t.map(function(t,a){var n=e.props.selectedIndex===a?"media active":"media";return d.a.createElement(_e.a,{key:t.title,className:n,onClick:function(n){return e.handleSelect(n,a,t)}},d.a.createElement("img",{src:t.img,alt:t.title}),d.a.createElement(We.a,{title:t.title,actionIcon:!e.props.isModal&&d.a.createElement(X.a,{className:"gridIcon",onClick:function(){return e.props.deleteImage(t.img,t.title)}},d.a.createElement(ce.a,null))}))}))):d.a.createElement("div",null)}}]),t}(u.Component),Ge=E.c.div(Fe()),Ke=Ye;function Je(){var e=Object(n.a)(["\n  margin-top: -40px;\n"]);return Je=function(){return e},e}function qe(){var e=Object(n.a)(["\n  border-style: dotted;\n  padding: 5px 20px;\n  margin: 20px 5px;\n  cursor: pointer;\n\n  /* desktop */\n  @media (min-width: 500px) {\n    min-width: 455px;\n  }\n"]);return qe=function(){return e},e}var Ze=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={uploadOpen:!1,error:null,customURL:!1,customURLtext:"",activeIndex:null,selectedValue:"",selectedName:"",deleteImgOpen:!1},a.getImageUrls=function(){var e=Object(p.a)(Object(p.a)(a)),t=[],n=Object.keys(a.props.currentImages).length,l=0,i=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SITENAME,r=b.a.storage().ref();Object.keys(a.props.currentImages).map(function(o,c){var s=a.props.currentImages[o];return r.child("".concat(i,"/").concat(s)).getDownloadURL().then(function(a){t=[].concat(Object(we.a)(t),[{title:s,img:a,key:o}]),n===++l&&e.props.setMediaImages(t)}).catch(function(e){console.log(e)})})},a.onDrop=function(e,t){if(console.log("accepted",e),console.log("rejected",t),0===t.length){var n=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SITENAME;if(b.a.auth().currentUser){console.log("user is signed in");var l=e[0];if(a.checkFileAlreadyExists(l))return void a.setState({error:"".concat(l.name," already exists, please remove the old image first")});b.a.storage().ref().child("".concat(n,"/").concat(l.name)).put(l).then(function(e){console.log("Uploaded a blob or file!"),console.log(e),a.addImageRefToDb(l)}).catch(function(e){console.log(e)})}else console.log(" No user is signed in."),a.props.isTimedOut()}else a.setState({error:"Rejected upload, incompatable file detected"})},a.checkFileAlreadyExists=function(e){if(null!==a.props.currentImages)return!!Object.keys(a.props.currentImages).filter(function(t,n){return a.props.currentImages[t]===e.name}).length},a.addImageRefToDb=function(e){var t=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SITENAME,n=b.a.database().ref().child("".concat(t,"/site/images")).push().key,i=Object(l.a)({},n,e.name),r=Object(p.a)(Object(p.a)(a));return b.a.database().ref().child("".concat(t,"/site/images")).update(i,function(e){e?console.log("image ref in db write failed...",e):(console.log("image ref in db saved successfully"),r.props.refreshState())})},a.selectedImage=function(e,t){a.setState({customURLtext:"",activeIndex:e,selectedValue:t.img,selectedName:t.title})},a.handleCustomURL=function(e){a.setState({customURLtext:e.target.value,activeIndex:null,selectedValue:"",selectedName:""})},a.confirmImage=function(){var e=a.state,t=e.customURLtext,n=e.selectedValue,l=a.props.tabItemReference,i=t||n;a.props.onChangePageState({name:l[0].name,value:i},l[1],l[2]),a.props.handleClose()},a.deleteImage=function(e,t){console.log(e,t),a.setState({deleteImgOpen:!0})},a.confirmDelete=function(){console.log(a.state,a.props);var e=Object(p.a)(Object(p.a)(a)),t=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SITENAME,n=a.props.imageURLs.find(function(e){return e.title===a.state.selectedName}),l=b.a.storage().ref();console.log("pre delete"),b.a.database().ref().child("".concat(t,"/site/images/").concat(n.key)).remove().then(function(){console.log("db delete succeeded!"),l.child("".concat(t,"/").concat(n.title)).delete().then(function(){console.log("storage img deleted"),e.setState({deleteImgOpen:!1}),e.props.refreshState()}).catch(function(e){console.log("storage error",e)})}).catch(function(e){console.log(e)})},a.handleUploadOpen=function(){a.setState({uploadOpen:!a.state.uploadOpen})},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){console.log("mounted"),this.getImageUrls()}},{key:"componentDidUpdate",value:function(e){null!==this.props.currentImages&&(this.props.currentImages===e.currentImages&&this.props.isAuthenticated===e.isAuthenticated||this.getImageUrls())}},{key:"render",value:function(){var e=this;console.log("media props",this.props);var t=this.state,a=t.error,n=t.uploadOpen,l=t.customURL,i=t.activeIndex,r=t.customURLtext,o=t.selectedName,c=t.selectedValue,s=this.props,p=s.imageURLs,u=s.currentImages,m=null,h=null,g=null;if(0===p.length&&u?g=d.a.createElement("div",null,d.a.createElement("p",null,d.a.createElement("i",null,"Loading media, if nothing appears after ten seconds. Please refresh the page"," ")),d.a.createElement(G.a,null)):null===u&&(g=d.a.createElement("div",null,d.a.createElement("p",null,d.a.createElement("i",null,"Here is where you can add images to your website, Click upload media to create your media library")))),n&&!this.props.isModal&&(m=d.a.createElement(je.a,{onDrop:this.onDrop,multiple:!1,accept:"image/*"},function(e){var t=e.getRootProps,a=e.getInputProps,n=e.isDragActive;return d.a.createElement(Qe,Object.assign({},t(),{className:Me()("dropzone",{"dropzone--isActive":n})}),d.a.createElement("input",a()),n?d.a.createElement("p",null,"Drop files here..."):d.a.createElement("p",null,"Try dropping some files here, or click to select files to upload."))})),this.props.isModal){var b="Current Selection:  ".concat(o);h=d.a.createElement(Xe,null,g,d.a.createElement(z.a,null,d.a.createElement(Y,{opacity:l},d.a.createElement(W.a,{onClick:function(){e.setState({customURL:!1})}},"Use Media Library")),d.a.createElement("h2",null,"OR .."),d.a.createElement(Y,{opacity:!l},d.a.createElement(W.a,{onClick:function(){e.setState({customURL:!0})}}," ",l?"Close":"Use"," custom URL location?"))),l?d.a.createElement(H.a,{inputtype:"input",label:"If you want to use an image stored elsewhere, enter the Url address below",value:r,onChange:this.handleCustomURL}):d.a.createElement("div",null,d.a.createElement(_.a,{elevation:5},d.a.createElement(Ke,{tileData:this.props.imageURLs,isModal:!0,selectedIndex:i,selectedImage:this.selectedImage})),d.a.createElement(H.a,{inputtype:"input",label:"".concat(c?b:"Select Media Image URL above"),value:c,disabled:!0,placeholder:"No Media image selected"})),d.a.createElement(Re.a,null),d.a.createElement("br",null),d.a.createElement(z.a,null,d.a.createElement(W.a,{onClick:this.props.handleClose},"Cancel"),d.a.createElement(W.a,{onClick:this.confirmImage},"Confirm Image")),d.a.createElement("br",null))}else h=d.a.createElement("div",null,g,d.a.createElement(W.a,{onClick:this.handleUploadOpen},n?"Close DropZone":"Upload Media"),m,a&&d.a.createElement("div",null,a),d.a.createElement(_.a,{elevation:7},d.a.createElement(Ke,{tileData:this.props.imageURLs,isModal:!1,selectedIndex:i,selectedImage:this.selectedImage,deleteImage:this.deleteImage})));return d.a.createElement(d.a.Fragment,null,h,d.a.createElement(Te,{open:this.state.deleteImgOpen,handleClose:function(){return e.setState({deleteImgOpen:!1})},title:"Delete image",description:"Are you sure you would like to delete the image ".concat(this.state.selectedName,". \n Please note that anywhere this image is used on the website will no longer work once the image is deleted.")},d.a.createElement(z.a,null,d.a.createElement(W.a,{onClick:this.confirmDelete},"Confirm Delete"),d.a.createElement(W.a,{onClick:function(){return e.setState({deleteImgOpen:!1})}},"Cancel"))))}}]),t}(u.Component),Qe=E.c.div(qe()),Xe=E.c.div(Je()),$e=Ze,et=a(433);function tt(){var e=Object(n.a)(["\n  width: 100%;\n"]);return tt=function(){return e},e}var at=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(l)))).handleChange=function(e){e.preventDefault(),a.props.changeTemplateState(e.target,"template",null)},a.handlesubmit=function(e){e.preventDefault();var t=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SITENAME,n="/".concat(t,"/site/template");a.props.templateChangeSubmit(n,a.props.template)},a.handleCheckbox=function(e){return function(t){console.log(e,t.target.checked);var n={name:t.target.name,value:t.target.checked};a.props.changeTemplateState(n,"template",null)}},a.handleMediaModal=function(e){e.preventDefault(),a.props.openMediaModal(e.target,"template",null)},a.clearInput=function(e){var t={name:e,value:""};a.props.changeTemplateState(t,"template",null)},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){if(!this.props.template)return d.a.createElement("div",null);var e=[{value:"contained"},{value:"outlined"}],t=this.props.template,a=t.navButtons,n=t.siteButtons,l=t.transparentHeader,i=t.navLightTheme,r=t.siteLogo;t.version;return d.a.createElement(nt,null,d.a.createElement(z.a,null,d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Is the header toolbar transparent",name:"transparentHeader",checked:l,handleChange:this.handleCheckbox}),d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Use Light theme for navigation Bar",name:"navLightTheme",checked:i,handleChange:this.handleCheckbox})),d.a.createElement(H.a,{inputtype:"inputSelector",label:"Website Logo",name:"siteLogo",value:r,onChange:this.handleChange,onClick:this.handleMediaModal,clearInput:this.clearInput}),d.a.createElement("br",null),d.a.createElement(et.a,{cols:"25% 25%",colsLarge:"35% 35%",colsMed:"50% 50%"},d.a.createElement(H.a,{inputtype:"select",label:"Header Navigation button style",name:"navButtons",value:a,items:e,onSelectChange:this.handleChange}),d.a.createElement(H.a,{inputtype:"select",label:"Webpage button style",name:"siteButtons",value:n,items:e,onSelectChange:this.handleChange}),d.a.createElement(W.a,{variant:a},"contained"===a?"Contained Style":"Outlined Style"),d.a.createElement(W.a,{variant:n},"contained"===n?"Contained Style":"Outlined Style")),d.a.createElement("br",null),d.a.createElement("hr",null),d.a.createElement("br",null),d.a.createElement(z.a,{justifyContent:"flex-start"},d.a.createElement(W.a,{margin:"2px 5px 15px 20px",onClick:this.handlesubmit},"Update"),this.props.isUpdating&&d.a.createElement(G.a,null),this.props.stateBackup&&d.a.createElement(W.a,{margin:"2px 20px 15px 20px",onClick:this.props.cancelUpdate},"Undo Changes")))}}]),t}(u.Component),nt=E.c.div(tt()),lt=at;function it(){var e=Object(n.a)(["\n  padding: 3vh;\n  display: grid;\n  grid-gap: 8px;\n  grid-template-columns: 65% 35%;\n"]);return it=function(){return e},e}function rt(){var e=Object(n.a)(["\n  display: block;\n  zoom: 30%;\n  padding-top: 56px;\n  box-shadow: 2px 2px 2px;\n\n  @media (max-width: 500px) {\n    display: none;\n  }\n"]);return rt=function(){return e},e}var ot=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(l)))).state={previewOpen:!1},a.handleChange=function(e){e.preventDefault(),a.props.changeHomepageState(e.target,"home",null)},a.handlesubmit=function(e){e.preventDefault();var t=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SITENAME,n="/".concat(t,"/site/home/content");a.props.homepageChangeSubmit(n,a.props.homePage.content)},a.handleCheckbox=function(e){return function(t){console.log(e,t.target.checked);var n={name:t.target.name,value:t.target.checked};a.props.changeHomepageState(n,"home",null)}},a.handleMediaModal=function(e){e.preventDefault(),a.props.openMediaModal(e.target,"home",null)},a.handleColourPicker=function(e){a.props.changeHomepageState(e.target,"home",null)},a.clearInput=function(e){var t={name:e,value:""};a.props.changeHomepageState(t,"home",null)},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){if(!this.props.homePage)return d.a.createElement("div",null);var e=this.props.homePage.content,t=e.topBanner,a=e.topBannerHalfwidth,n=e.topBannerImgSize,l=e.topBannerHWbackImg,i=e.topBannerHWBackColour,r=e.topBannerTxtRightSide,o=e.topBannerTxtLightTheme,c=e.topBannerLogo,s=e.topBannerfade,p=e.topBannerTitle,u=e.topBannerSubtitle,m=e.topBannerDescription,h=e.topBannerBtnText,g=e.topBannerLink,b=e.midBanner,E=e.midBannerHalfwidth,v=e.midBannerImgSize,C=e.midBannerHWbackImg,f=e.midBannerHWBackColour,k=e.midBannerTxtRightSide,B=e.midBannerTxtLightTheme,x=e.midBannerLogo,I=e.midBannerfade,y=e.midBannerTitle,S=e.midBannerSubtitle,O=e.midBannerDescription,T=e.midBannerBtnText,P=e.midBannerLink,w=(e.bottomBanner,e.mainText),j=e.mainTextPosition,U=e.mainTextCenterTitle,M=e.mainTextRightSide,L=e.mainTextBackColour,R=e.mainTextImg,A=e.mainTextImgAlign,D=e.mainTextImgWidth,N=e.mainTextImgHeight;return console.log("Homepage Props",this.props),d.a.createElement("div",{className:"fullwidth"},d.a.createElement(st,null,d.a.createElement("div",null,d.a.createElement(H.a,{inputtype:"inputSelector",label:"".concat(a?"Top Banner Image (Inside Banner)":"Top Banner Image"),name:"topBanner",value:t,onChange:this.handleChange,onClick:this.handleMediaModal,clearInput:this.clearInput}),t&&d.a.createElement(re,null,d.a.createElement(Y,null,d.a.createElement(z.a,null,d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Use the Top Banner image inside the Banner ",name:"topBannerHalfwidth",checked:a,handleChange:this.handleCheckbox})),a&&d.a.createElement(d.a.Fragment,null,d.a.createElement(H.a,{inputtype:"inputSelector",label:"Banner Background Image",name:"topBannerHWbackImg",value:l,onChange:this.handleChange,onClick:this.handleMediaModal,clearInput:this.clearInput}),d.a.createElement(z.a,null,d.a.createElement(H.a,{inputtype:"input",type:"number",label:"Banner Image Size",name:"topBannerImgSize",value:n,onChange:this.handleChange}),d.a.createElement(H.a,{inputtype:"inputColourPicker",label:"Banner Background Colour",name:"topBannerHWBackColour",value:i,changeColour:this.handleColourPicker,pageId:"home"}))),d.a.createElement(z.a,null,d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Banner Text Right Side",name:"topBannerTxtRightSide",checked:r,handleChange:this.handleCheckbox}),d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Banner Light Text Color",name:"topBannerTxtLightTheme",checked:o,handleChange:this.handleCheckbox})),d.a.createElement(z.a,null,d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Use Logo in banner",name:"topBannerLogo",checked:c,handleChange:this.handleCheckbox}),d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Banner content fade in effect",name:"topBannerfade",checked:s,handleChange:this.handleCheckbox})),d.a.createElement(H.a,{inputtype:"input",label:"Banner Title",name:"topBannerTitle",value:p,onChange:this.handleChange}),d.a.createElement(H.a,{inputtype:"input",label:"Banner Subtitle",name:"topBannerSubtitle",value:u,onChange:this.handleChange}),d.a.createElement(H.a,{inputtype:"input",label:"Banner Description",name:"topBannerDescription",value:m,onChange:this.handleChange}),d.a.createElement(z.a,null,d.a.createElement(H.a,{inputtype:"input",label:"Banner Button Text",name:"topBannerBtnText",value:h,onChange:this.handleChange}),d.a.createElement(H.a,{inputtype:"select",label:"Banner Link",name:"topBannerLink",value:g,items:this.props.availableRoutes,onSelectChange:this.handleChange})))),d.a.createElement(H.a,{inputtype:"inputSelector",label:"".concat(E?"Middle Banner Image (Inside Banner)":"Middle Banner Image"),name:"midBanner",value:b,onChange:this.handleChange,onClick:this.handleMediaModal,clearInput:this.clearInput}),b&&d.a.createElement(re,null,d.a.createElement(Y,null,d.a.createElement(z.a,null,d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Use the Middle Banner image inside the Banner",name:"midBannerHalfwidth",checked:E,handleChange:this.handleCheckbox})),E&&d.a.createElement(d.a.Fragment,null,d.a.createElement(H.a,{inputtype:"inputSelector",label:"Banner Background Image",name:"midBannerHWbackImg",value:C,onChange:this.handleChange,onClick:this.handleMediaModal,clearInput:this.clearInput}),d.a.createElement(z.a,null,d.a.createElement(H.a,{inputtype:"input",type:"number",label:"Banner Image Size",name:"midBannerImgSize",value:v,onChange:this.handleChange}),d.a.createElement(H.a,{inputtype:"inputColourPicker",label:"Banner Background Colour",name:"midBannerHWBackColour",value:f,changeColour:this.handleColourPicker,pageId:"home"}))),d.a.createElement(z.a,null,d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Banner Text Right Side",name:"midBannerTxtRightSide",checked:k,handleChange:this.handleCheckbox}),d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Banner Light Text Color",name:"midBannerTxtLightTheme",checked:B,handleChange:this.handleCheckbox})),d.a.createElement(z.a,null,d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Use Logo in banner",name:"midBannerLogo",checked:x,handleChange:this.handleCheckbox}),d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Banner content fade in effect",name:"midBannerfade",checked:I,handleChange:this.handleCheckbox})),d.a.createElement(H.a,{inputtype:"input",label:"Banner Title",name:"midBannerTitle",value:y,onChange:this.handleChange}),d.a.createElement(H.a,{inputtype:"input",label:"Banner Subtitle",name:"midBannerSubtitle",value:S,onChange:this.handleChange}),d.a.createElement(H.a,{inputtype:"input",label:"Banner Description",name:"midBannerDescription",value:O,onChange:this.handleChange}),d.a.createElement(z.a,null,d.a.createElement(H.a,{inputtype:"input",label:"Banner Button Text",name:"midBannerBtnText",value:T,onChange:this.handleChange}),d.a.createElement(H.a,{inputtype:"select",label:"Banner Link",name:"midBannerLink",value:P,items:this.props.availableRoutes,onSelectChange:this.handleChange})))),d.a.createElement(H.a,{inputtype:"textarea",label:"Main Body Text",name:"mainText",value:w,onChange:this.handleChange}),d.a.createElement(re,null,d.a.createElement(Y,null,d.a.createElement(z.a,null,d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Center Header text",name:"mainTextCenterTitle",checked:U,handleChange:this.handleCheckbox}),d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Align Text Right Side",name:"mainTextRightSide",checked:M,handleChange:this.handleCheckbox})),d.a.createElement(H.a,{inputtype:"select",label:"Main Text Page Position",name:"mainTextPosition",value:j,items:[{value:"Top"},{value:"Middle"},{value:"Bottom"}],onSelectChange:this.handleChange}),d.a.createElement(H.a,{inputtype:"inputSelector",label:"Add a Small Image",name:"mainTextImg",value:R,onChange:this.handleChange,onClick:this.handleMediaModal,clearInput:this.clearInput}),d.a.createElement(et.a,{cols:"33% 33% 33%",margin:"0 15px 0 0"},d.a.createElement(H.a,{inputtype:"select",label:"Image align position",name:"mainTextImgAlign",value:A,items:[{value:"left"},{value:"right"}],onSelectChange:this.handleChange}),d.a.createElement(H.a,{inputtype:"input",type:"number",label:"Banner Image Width",name:"mainTextImgWidth",value:D||200,onChange:this.handleChange}),d.a.createElement(H.a,{inputtype:"input",type:"number",label:"Banner Image Height",name:"mainTextImgHeight",value:N||135,onChange:this.handleChange})),d.a.createElement(H.a,{inputtype:"inputColourPicker",label:"Banner Background Colour",name:"mainTextBackColour",value:L,changeColour:this.handleColourPicker,pageId:"home"})))),d.a.createElement(ct,null,d.a.createElement(se.a,Object.assign({pageInfo:this.props.homePage},this.props,{template:this.props.template,overlayBlocker:!0})))),d.a.createElement(z.a,{justifyContent:"flex-start"},d.a.createElement(W.a,{margin:"2px 5px 15px 20px",onClick:this.handlesubmit},"Update"),this.props.isUpdating&&d.a.createElement(G.a,null),this.props.stateBackup&&d.a.createElement(W.a,{margin:"2px 20px 15px 20px",onClick:this.props.cancelUpdate},"Undo Changes")))}}]),t}(u.Component),ct=E.c.div(rt()),st=E.c.div(it()),pt=ot,ut=a(472),dt=a.n(ut),mt=a(904),ht=a.n(mt),gt=a(149),bt=a.n(gt),Et=a(902),vt=a.n(Et),Ct=a(908),ft=a.n(Ct),kt=a(919),Bt=a.n(kt);function xt(){var e=Object(n.a)(["\n    display: flex;\n    flex-wrap: wrap;    \n    margin: ",";\n\n    div {\n      /* margin: ","; */\n      width: ",";\n      /* min-width: ","; */\n      max-width: ",";\n\n      .chips {\n        min-width:auto;\n        display: flex;\n        flex-wrap: wrap;\n        \n\n        .chip{\n          margin: 2px;\n          flex-wrap: wrap;\n          width: auto;\n        }\n\n      }\n\n    }\n\n"]);return xt=function(){return e},e}var It={PaperProps:{style:{maxHeight:224,width:250}}},yt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(l)))).state={name:[]},a.handleChange=function(e){a.setState({name:e.target.value}),a.props.handleChange&&a.props.handleChange(e)},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.label,a=e.items,n=e.name,l=e.value,i=e.margin,r=e.width;return d.a.createElement(St,{margin:i,width:r},d.a.createElement(vt.a,null,d.a.createElement(ht.a,{htmlFor:"select-multiple-chip"},t),d.a.createElement(ft.a,{multiple:!0,value:l||this.state.name,onChange:this.handleChange,input:d.a.createElement(dt.a,{id:"select-multiple-chip"}),name:n,renderValue:function(e){return d.a.createElement("div",{className:"chips"},e.map(function(e){return d.a.createElement(Bt.a,{key:e,label:e,className:"chip"})}))},MenuProps:It},a.map(function(e){return d.a.createElement(bt.a,{key:e,value:e},e)}))))}}]),t}(d.a.Component),St=E.c.div(xt(),function(e){return e.margin||"8px"},function(e){return e.margin||"8px"},function(e){return e.width||"400px"},function(e){return e.minwidth||"200px"},function(e){return e.minwidth||"450px"}),Ot=yt,Tt=function(e){if(!e.plugin)return d.a.createElement("div",null);var t=e.plugin,a=t.contactUsActive,n=t.contactUsPages,l=t.contactUsEmail;return console.log("contact us settings props",e),d.a.createElement("div",null,d.a.createElement(z.a,null,d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Contact Us Plugin",parentObj:e.parentObj,name:"contactUsActive",checked:a,handleChange:e.handleCheckbox}),a&&d.a.createElement(Ot,{label:"Select the pages where this plugin is available",items:e.availableRoutes,name:"contactUsPages",value:n,handleChange:e.handleChange,margin:"0 10px 20px 15px"})),a&&d.a.createElement(re,{padding:"20px"},d.a.createElement("div",null,d.a.createElement(H.a,{inputtype:"input",label:"Enter Business email where contact requests are received",parentObj:e.parentObj,name:"contactUsEmail",value:l,onChange:e.handleChange}))))},Pt=function(e){if(!e.plugin)return d.a.createElement("div",null);var t=e.plugin,a=t.bookingActive,n=t.bookingPages,l=t.bookingEmail,i=t.bookingForm,r=t.bookingCalendarID,o=t.bookingApiKey;return console.log("booking settings props",e),d.a.createElement("div",null,d.a.createElement(z.a,null,d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Booking Plugin",parentObj:e.parentObj,name:"bookingActive",checked:a,handleChange:e.handleCheckbox}),a&&d.a.createElement(Ot,{label:"Select the pages where this plugin is available",items:e.availableRoutes,name:"bookingPages",value:n,handleChange:e.handleChange,margin:"0 10px 20px 15px"})),a&&d.a.createElement(re,{emptyHeight:"200px",padding:"20px"},d.a.createElement("div",null,d.a.createElement(H.a,{inputtype:"input",label:"Enter Business email where bookings are received",parentObj:e.parentObj,name:"bookingEmail",value:l,onChange:e.handleChange}),d.a.createElement(H.a,{inputtype:"checkbox",sideLabel:"Include Contact form with booking calendar",parentObj:e.parentObj,name:"bookingForm",checked:i,handleChange:e.handleCheckbox}),d.a.createElement(H.a,{inputtype:"input",label:"Gmail Calendar Id",parentObj:e.parentObj,name:"bookingCalendarID",value:r,onChange:e.handleChange}),d.a.createElement(H.a,{inputtype:"input",label:"Gmail Api Key",parentObj:e.parentObj,name:"bookingApiKey",value:o,onChange:e.handleChange}))))};function wt(){var e=Object(n.a)(["\n  width: 100%;\n"]);return wt=function(){return e},e}var jt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={contactUsPlugin:!1},a.accordianClick=function(e){a.setState(Object(l.a)({},e,!a.state[e]))},a.handleChange=function(e,t){a.props.changePluginState(e.target,"plugins",t)},a.handleCheckbox=function(e,t){return function(n){console.log(e,t,n.target.checked);var l={name:n.target.name,value:n.target.checked};a.props.changePluginState(l,"plugins",t)}},a.handlesubmit=function(e){e.preventDefault();var t=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SITENAME,n="/".concat(t,"/site/plugins");a.props.pluginsChangeSubmit(n,a.props.plugins)},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.plugins)return d.a.createElement("div",null,d.a.createElement(G.a,null));console.log("plugins props",this.props);var t=this.props.availableRoutes.map(function(e){return("/"===e.value?"home":e.value).split("/").pop()});return t.unshift("All Pages"),d.a.createElement("div",null,d.a.createElement(Ut,null,d.a.createElement(Tt,{plugin:this.props.plugins.contactUs,name:"contactUsPlugin",parentObj:"contactUs",availableRoutes:t,accordianClick:this.accordianClick,handleCheckbox:this.handleCheckbox,handleChange:function(t){return e.handleChange(t,"contactUs")}}),d.a.createElement("br",null),d.a.createElement("br",null),d.a.createElement(Pt,{plugin:this.props.plugins.booking,name:"bookingPlugin",parentObj:"booking",availableRoutes:t,accordianClick:this.accordianClick,handleCheckbox:this.handleCheckbox,handleChange:function(t){return e.handleChange(t,"booking")}})),d.a.createElement(z.a,{justifyContent:"flex-start"},d.a.createElement(W.a,{margin:"2px 5px 15px 20px",onClick:this.handlesubmit},"Update"),this.props.isUpdating&&d.a.createElement(G.a,null),this.props.stateBackup&&d.a.createElement(W.a,{margin:"2px 20px 15px 20px",onClick:this.props.cancelUpdate},"Undo Changes")))}}]),t}(u.Component),Ut=E.c.div(wt()),Mt=jt,Lt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.onFormChange=function(e){var t=e.target,n=t.name,i=t.value;a.setState(Object(l.a)({},n,i))},a.submitHandler=function(e){e.preventDefault(),a.props.onAuth(a.state.email,a.state.password,a.props.admin)},a.backToHome=function(){a.props.history.push("/")},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.isAuthenticated!==e.isAuthenticated&&this.props.isTimedOut()}},{key:"render",value:function(){console.log("AuthModal page props",this.props);var e=null;return this.props.error&&(e=d.a.createElement("p",null,this.props.error)),d.a.createElement("div",null,d.a.createElement("div",null,"Administrator Login"),d.a.createElement("br",null),d.a.createElement(H.a,{inputtype:"input",placeholder:"email",name:"email",value:this.state.email,onChange:this.onFormChange}),d.a.createElement(H.a,{inputtype:"input",placeholder:"password",name:"password",value:this.state.password,onChange:this.onFormChange}),e,d.a.createElement("br",null),d.a.createElement(z.a,null,d.a.createElement(W.a,{onClick:this.backToHome},"Cancel"),d.a.createElement(W.a,{onClick:this.submitHandler},"Submit")),this.props.loading&&d.a.createElement(G.a,null))}}]),t}(u.Component),Rt=Object(m.connect)(function(e){return{loading:e.auth.loading,error:e.auth.error,admin:e.mainState.admin,isAuthenticated:null!==e.auth.userId}},function(e){return{onAuth:function(t,a,n){return e(h.a(t,a,n))}}})(Lt);function At(){var e=Object(n.a)(["\n  background-color: #424242;\n  min-height: 100vh;\n  padding: 100px 50px;\n  margin-top: -75px;\n\n  .admin-title {\n    color: #f5f5f5;\n  }\n"]);return At=function(){return e},e}var Dt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={homepage_accordian:!1,navigation_accordian:!1,template_accordian:!1,media_accordian:!1,showSignIn:!1,newPageOpen:!1,deletePageModal:!1,pageToDelete:null,openMediaModal:!1,mediaModalTabItemRef:[],mediaImages:[],newPageToast:null,loading:!1,error:null},a.logoutHandler=function(){b.a.auth().signOut().then(function(){console.log("Signed Out")},function(e){console.error("Sign Out Error",e)}),a.props.onLogoutClick()},a.openMediaModal=function(e,t,n){console.log("opneMedia Modal",e,t,n),a.setState({openMediaModal:!0,mediaModalTabItemRef:[e,t,n]})},a.closeMediaModal=function(){a.setState({openMediaModal:!1})},a.setMediaImages=function(e){a.setState({mediaImages:e})},a.handleNewPageButton=function(e){e.preventDefault(),a.setState({newPageOpen:!a.state.newPageOpen})},a.submitNewPage=function(e){console.log("newPage_State",e);var t=e.title,n=e.checked,i=e.selectVal,r=a.props.navigationItems,o=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SITENAME,c=t.replace(/ /g,"-").toLowerCase(),s={id:Date.now(),mainText:"This is your newly added ".concat(t," page")},u="/".concat(o,"/site/navigationItems"),d={title:t,route:c,selected:!1,content:s};if(n){var m=null;for(var h in r)r[h].title===i&&(m=h);u="/".concat(o,"/site/navigationItems/").concat(m,"/dropdownPages"),d={title:t,route:c,content:s}}a.setState({loading:!0,error:null},function(){var e=Object(p.a)(Object(p.a)(a)),t=b.a.database().ref().child(u).push().key,n=Object(l.a)({},t,d);b.a.database().ref().child(u).update(n,function(t){t?e.setState({loading:!1,error:t.code,newPageOpen:!1,showSignIn:!0}):(console.log("new page added successfully!"),e.setState({loading:!1,error:null,newPageOpen:!1,newPageToast:"New Page added successfully"}),e.props.onInitWebsiteState())})})},a.handleDeletePageModal=function(e,t){a.state.deletePageModal?a.setState({deletePageModal:!1,pageToDelete:null}):a.setState({deletePageModal:!0,pageToDelete:{id:e,parentId:t}})},a.submitDeletePage=function(){console.log(a.state.pageToDelete);var e=Object(p.a)(Object(p.a)(a)),t=a.state.pageToDelete,n=t.id,l=t.parentId,i=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SITENAME,r="/".concat(i,"/site/navigationItems/").concat(n);l&&(r="/".concat(i,"/site/navigationItems/").concat(l,"/dropdownPages/").concat(n)),b.a.database().ref(r).remove().then(function(){console.log("Remove succeeded."),e.props.onInitWebsiteState(),e.setState({deletePageModal:!1,pageToDelete:null})}).catch(function(e){console.log("Remove failed: "+e.message)})},a.updatePage=function(e,t,n){console.log(e.value,t,n),a.props.onChangePageState(e,t,n)},a.updatePageSubmit=function(e,t,n){console.log(e,t,n);var l=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SITENAME,i=n?"/".concat(l,"/site/navigationItems/").concat(n,"/dropdownPages/").concat(t,"/content"):"/".concat(l,"/site/navigationItems/").concat(t,"/content");b.a.auth().currentUser?(console.log("user is signed in"),a.props.onUpdatePageSubmit(i,e)):(console.log(" No user is signed in."),a.setState({showSignIn:!0,error:"Permission denied. Please sign in again to Re-authenticate"}))},a.timedOutUser=function(){b.a.auth().currentUser?a.setState({showSignIn:!1}):(console.log(" No user is signed in."),a.setState({showSignIn:!0}))},a.accordianClick=function(e){a.setState(Object(l.a)({},e,!a.state[e]))},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentWillMount",value:function(){console.log("adminPage - sitename",Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SITENAME),this.props.isAuthenticated||this.props.history.push("/authenticate-admin"),b.a.auth().currentUser?console.log("user is signed in"):console.log(" No user is signed in.")}},{key:"componentDidUpdate",value:function(e){e.isAuthenticated&&!this.props.isAuthenticated&&this.props.history.push("/authenticate-admin")}},{key:"render",value:function(){var e=this;console.log("Admin Page props",this.props);var t=this.state,a=t.media_accordian,n=t.template_accordian,l=t.homepage_accordian,i=t.navigation_accordian,r=t.plugins_accordian;return d.a.createElement(Nt,null,d.a.createElement(z.a,{justifyContent:"space-between"},d.a.createElement("h1",{className:"admin-title"},"Admin Page"),d.a.createElement(W.a,{onClick:this.logoutHandler},"logout")),d.a.createElement(Te,{open:this.state.showSignIn,title:"You have been logged out",description:"Your administrator session has expired you will need to log back in to continue"},d.a.createElement(Rt,{history:this.props.history,isTimedOut:this.timedOutUser})),d.a.createElement("div",null,d.a.createElement(T,{title:"Media",name:"media_accordian",onClick:function(t){return e.accordianClick(t)}},a&&d.a.createElement($e,{isAuthenticated:this.props.isAuthenticated,isTimedOut:this.timedOutUser,currentImages:this.props.images,refreshState:this.props.onInitWebsiteState,isModal:!1,imageURLs:this.state.mediaImages,setMediaImages:this.setMediaImages})),d.a.createElement("br",null),d.a.createElement(T,{title:"Template",name:"template_accordian",onClick:function(t){return e.accordianClick(t)}},n&&d.a.createElement(lt,{template:this.props.template,changeTemplateState:this.props.onChangePageState,templateChangeSubmit:this.props.onUpdatePageSubmit,isUpdating:this.props.isUpdating,isError:this.props.isError,stateBackup:this.props.stateBackup,cancelUpdate:this.props.onRevertChanges,openMediaModal:this.openMediaModal})),d.a.createElement("br",null),d.a.createElement(T,{title:"Homepage",name:"homepage_accordian",onClick:function(t){return e.accordianClick(t)}},l&&d.a.createElement(pt,{homePage:this.props.home,changeHomepageState:this.props.onChangePageState,homepageChangeSubmit:this.props.onUpdatePageSubmit,isUpdating:this.props.isUpdating,isError:this.props.isError,stateBackup:this.props.stateBackup,cancelUpdate:this.props.onRevertChanges,openMediaModal:this.openMediaModal,availableRoutes:this.props.availableRoutes,template:this.props.template,plugins:this.props.plugins})),d.a.createElement("br",null),d.a.createElement(T,{title:"Navigation and Pages",name:"navigation_accordian",onClick:function(t){return e.accordianClick(t)}},i&&d.a.createElement("div",{className:"fullwidth"},d.a.createElement(W.a,{onClick:this.handleNewPageButton},"Add a new page"),d.a.createElement(Te,{open:this.state.newPageOpen,navigationItems:this.props.navigationItems,handleClose:this.handleNewPageButton,title:"Add a new Webpage",description:"Here you can add a new page to your website which will show in the header navigation. You can also make the new page a subpage of another navigation link"},d.a.createElement(Pe,{loading:this.state.loading,navigationItems:this.props.navigationItems,handleClose:this.handleNewPageButton,handleSubmit:this.submitNewPage})),d.a.createElement(Te,{open:this.state.deletePageModal,navigationItems:this.props.navigationItems,handleClose:this.handleDeletePageModal,title:"Delete Webpage",description:"You are about to delete selected page this is a permanent action, would you like to continue with deleting this page"},d.a.createElement(z.a,null,d.a.createElement(W.a,{onClick:this.submitDeletePage},"Delete"),d.a.createElement(W.a,{onClick:this.handleDeletePageModal},"Cancel"))),d.a.createElement("br",null),d.a.createElement("br",null),d.a.createElement(ve,{navigationItems:this.props.navigationItems,updatePageSubmit:this.updatePageSubmit,onChange:this.updatePage,openMediaModal:this.openMediaModal,handlePageDelete:this.handleDeletePageModal,isUpdating:this.props.isUpdating,cancelUpdate:this.props.onRevertChanges,isError:this.props.isError,stateBackup:this.props.stateBackup,availableRoutes:this.props.availableRoutes,template:this.props.template,plugins:this.props.plugins}),d.a.createElement("br",null))),d.a.createElement("br",null),d.a.createElement(T,{title:"Plugins",name:"plugins_accordian",onClick:function(t){return e.accordianClick(t)}},r&&d.a.createElement(Mt,{plugins:this.props.plugins,changePluginState:this.props.onChangePageState,pluginsChangeSubmit:this.props.onUpdatePageSubmit,availableRoutes:this.props.availableRoutes,isUpdating:this.props.isUpdating,isError:this.props.isError,stateBackup:this.props.stateBackup,cancelUpdate:this.props.onRevertChanges})),d.a.createElement(Te,{open:this.state.openMediaModal,title:"Choose an image",description:"Select the media location you would like to use",handleClose:this.closeMediaModal},d.a.createElement($e,{isModal:!0,isAuthenticated:this.props.isAuthenticated,handleClose:this.closeMediaModal,currentImages:this.props.images,imageURLs:this.state.mediaImages,setMediaImages:this.setMediaImages,tabItemReference:this.state.mediaModalTabItemRef,onChangePageState:this.props.onChangePageState}))),null!==this.state.newPageToast&&d.a.createElement(D.a,{message:this.state.newPageToast}),null!==this.props.updatePageToast&&d.a.createElement(D.a,{message:this.props.updatePageToast}),this.state.error&&d.a.createElement(D.a,{message:this.state.error,error:!0}))}}]),t}(u.Component),Nt=E.c.div(At());t.a=Object(m.connect)(function(e){return{isAuthenticated:null!==e.auth.userId,userId:e.auth.userId,home:e.mainState.home,navigationItems:e.mainState.navigationItems,images:e.mainState.images,stateBackup:e.mainState.state_copy,updatePageToast:e.admin.pageUpdateToast,isUpdating:e.admin.loading,isError:e.admin.error,availableRoutes:e.admin.routes,template:e.mainState.template,plugins:e.mainState.plugins}},function(e){return{onInitWebsiteState:function(){return e(h.c())},onLogoutClick:function(){return e(h.d())},onChangePageState:function(t,a,n){return e(h.b(t,a,n))},onUpdatePageSubmit:function(t,a){return e(h.g(t,a))},onRevertChanges:function(){return e(h.e())}}})(Dt)},928:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(32),r=a(108),o=a(558);t.default=Object(i.connect)(function(e){return{currentUser:e.auth.currentUser}},null)(function(e){e.currentUser;return l.a.createElement(r.a,{id:"admin",title:"Admin",noCrawl:!0},l.a.createElement(o.a,null))})},929:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(108),r=a(558);t.default=function(e){return console.log("admin_TEST.props",e),l.a.createElement(i.a,{id:"admin",title:"Admin",noCrawl:!0},l.a.createElement(r.a,e))}}}]);
//# sourceMappingURL=admin.55e8027d.chunk.js.map